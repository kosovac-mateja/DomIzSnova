{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/kosov/OneDrive/Dokumenti/UredjivanjeProstoraAPP/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { Agencija } from '../models/agencija';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/radnik.service\";\nimport * as i2 from \"../services/agencija.service\";\nimport * as i3 from \"../services/provera.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"../zaglavlje-agencija/zaglavlje-agencija.component\";\n\nfunction RadniciAgencijaComponent_table_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"table\", 12);\n  }\n}\n\nfunction RadniciAgencijaComponent_p_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \"Trenutno nemate radnika\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport class RadniciAgencijaComponent {\n  constructor(radnikServis, agencijaServis, proveraServis, ruter) {\n    this.radnikServis = radnikServis;\n    this.agencijaServis = agencijaServis;\n    this.proveraServis = proveraServis;\n    this.ruter = ruter;\n    this.radnici = [];\n    this.agencija = new Agencija();\n    this.rezimIzmene = false;\n    this.ime = '';\n    this.prezime = '';\n    this.mejl = '';\n    this.telefon = '';\n    this.specijalizacija = '';\n    this.prosirenje = 0;\n    this.greska = '';\n  }\n\n  ngOnInit() {\n    let korisnickoIme = sessionStorage.getItem('korisnik');\n    this.agencijaServis.dohvatiAgenciju(korisnickoIme).subscribe(agencija => {\n      this.agencija = agencija;\n    });\n    this.radnikServis.dohvatiRadnikeAgencije(korisnickoIme).subscribe(radnici => {\n      this.radnici = radnici;\n    });\n  }\n\n  obrisiRadnika(radnik) {\n    this.radnikServis.obrisiRadnika(radnik._id).subscribe(radnik => {\n      this.radnikServis.dohvatiRadnikeAgencije(this.agencija.korisnickoIme).subscribe(radnici => {\n        this.radnici = radnici;\n      });\n    });\n  }\n\n  izmeniRadnika(radnik) {\n    this.radnikServis.azurirajRadnika(radnik).subscribe(radnik => {\n      this.radnikServis.dohvatiRadnikeAgencije(this.agencija.korisnickoIme).subscribe(radnici => {\n        this.radnici = radnici;\n      });\n    });\n    this.rezimIzmene = false;\n  }\n\n  dodajRadnika() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const radnik = {\n        telefon: _this.telefon,\n        mejl: _this.mejl,\n        ime: _this.ime,\n        prezime: _this.prezime\n      };\n      let provera = yield _this.proveraServis.proveraRadnik(radnik);\n\n      if (provera != 'ok') {\n        _this.greska = provera;\n        return;\n      }\n\n      _this.radnikServis.dodajRadnika(_this.ime, _this.prezime, _this.mejl, _this.telefon, _this.specijalizacija, _this.agencija.korisnickoIme).subscribe(radnik => {\n        alert('Uspesno ste dodali radnika!');\n\n        _this.radnikServis.dohvatiRadnikeAgencije(_this.agencija.korisnickoIme).subscribe(radnici => {\n          _this.radnici = radnici;\n        });\n      });\n\n      _this.ime = '';\n      _this.prezime = '';\n      _this.mejl = '';\n      _this.telefon = '';\n      _this.specijalizacija = '';\n      _this.greska = '';\n    })();\n  }\n\n  posaljiZahtev() {\n    if (this.agencija.zahtev != 0) {\n      alert('Vec ste poslali zahtev za prosirenje broja radnih mesta!\\nAdministratori ce uskoro razmotriti vas zahtev');\n      return;\n    }\n\n    this.agencijaServis.azurirajPodatak(this.agencija.korisnickoIme, 'zahtev', this.prosirenje).subscribe(res => {\n      alert('Uspesno ste poslali zahtev za povecanje broja radnih mesta!');\n      this.prosirenje = 0;\n    });\n  }\n\n  odjava() {\n    sessionStorage.clear();\n    this.ruter.navigate(['/']);\n  }\n\n}\n\nRadniciAgencijaComponent.ɵfac = function RadniciAgencijaComponent_Factory(t) {\n  return new (t || RadniciAgencijaComponent)(i0.ɵɵdirectiveInject(i1.RadnikService), i0.ɵɵdirectiveInject(i2.AgencijaService), i0.ɵɵdirectiveInject(i3.ProveraService), i0.ɵɵdirectiveInject(i4.Router));\n};\n\nRadniciAgencijaComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: RadniciAgencijaComponent,\n  selectors: [[\"app-radnici-agencija\"]],\n  decls: 34,\n  vars: 6,\n  consts: [[1, \"container\"], [1, \"row\"], [1, \"col-md-12\"], [\"class\", \"table table-striped\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"col-md-6\"], [1, \"table\"], [1, \"col-md-8\"], [\"type\", \"number\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"col-md-4\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"text-danger\"], [1, \"table\", \"table-striped\"]],\n  template: function RadniciAgencijaComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"app-zaglavlje-agencija\")(1, \"app-zaglavlje-agencija\");\n      i0.ɵɵelementStart(2, \"div\", 0)(3, \"div\", 1)(4, \"div\", 2)(5, \"h4\");\n      i0.ɵɵtext(6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"h4\");\n      i0.ɵɵtext(8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(9, \"hr\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(10, RadniciAgencijaComponent_table_10_Template, 1, 0, \"table\", 3);\n      i0.ɵɵtemplate(11, RadniciAgencijaComponent_p_11_Template, 2, 0, \"p\", 4);\n      i0.ɵɵelement(12, \"hr\");\n      i0.ɵɵelementStart(13, \"div\", 1)(14, \"div\", 5)(15, \"h2\");\n      i0.ɵɵtext(16, \"Dodaj radnika\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(17, \"table\", 6)(18, \"hr\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"div\", 5)(20, \"h2\");\n      i0.ɵɵtext(21, \"Zahtevaj pro\\u0161irenje kapaciteta radnika\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(22, \"div\", 1)(23, \"div\", 7);\n      i0.ɵɵtext(24, \" Zahtevaj jo\\u0161 \");\n      i0.ɵɵelementStart(25, \"input\", 8);\n      i0.ɵɵlistener(\"ngModelChange\", function RadniciAgencijaComponent_Template_input_ngModelChange_25_listener($event) {\n        return ctx.prosirenje = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(26, \" radnika \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(27, \"div\", 9)(28, \"button\", 10);\n      i0.ɵɵlistener(\"click\", function RadniciAgencijaComponent_Template_button_click_28_listener() {\n        return ctx.posaljiZahtev();\n      });\n      i0.ɵɵtext(29, \"Po\\u0161alji zahtev\");\n      i0.ɵɵelementEnd()()()()();\n      i0.ɵɵelementStart(30, \"div\", 1)(31, \"div\", 2)(32, \"p\", 11);\n      i0.ɵɵtext(33);\n      i0.ɵɵelementEnd()()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(6);\n      i0.ɵɵtextInterpolate1(\"Broj radnika: \", ctx.radnici.length, \"\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\"Kapacitet radnika: \", ctx.agencija.kapacitetRadnika, \"\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.radnici.length > 0);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.radnici.length == 0);\n      i0.ɵɵadvance(14);\n      i0.ɵɵproperty(\"ngModel\", ctx.prosirenje);\n      i0.ɵɵadvance(8);\n      i0.ɵɵtextInterpolate(ctx.greska);\n    }\n  },\n  dependencies: [i5.NgIf, i6.DefaultValueAccessor, i6.NumberValueAccessor, i6.NgControlStatus, i6.NgModel, i7.ZaglavljeAgencijaComponent],\n  styles: [\".container[_ngcontent-%COMP%] {\\r\\n    display: flex;\\r\\n    flex-direction: column;\\r\\n    align-items: center;\\r\\n  }\\r\\n  \\r\\n  \\r\\n  \\r\\n  .container[_ngcontent-%COMP%]    > *[_ngcontent-%COMP%] {\\r\\n    margin: 10px 0;\\r\\n  }\\r\\n  \\r\\n  \\r\\n  \\r\\n  table[_ngcontent-%COMP%] {\\r\\n    width: 100%;\\r\\n    border-collapse: collapse;\\r\\n  }\\r\\n  \\r\\n  th[_ngcontent-%COMP%], td[_ngcontent-%COMP%] {\\r\\n    padding: 8px;\\r\\n    text-align: left;\\r\\n    border-bottom: 1px solid #ddd;\\r\\n  }\\r\\n  \\r\\n  th[_ngcontent-%COMP%] {\\r\\n    background-color: #f2f2f2;\\r\\n  }\\r\\n  \\r\\n  \\r\\n  \\r\\n  .btn[_ngcontent-%COMP%] {\\r\\n    display: inline-block;\\r\\n    padding: 6px 12px;\\r\\n    margin-bottom: 0;\\r\\n    font-size: 14px;\\r\\n    font-weight: normal;\\r\\n    line-height: 1.42857143;\\r\\n    text-align: center;\\r\\n    white-space: nowrap;\\r\\n    vertical-align: middle;\\r\\n    cursor: pointer;\\r\\n    -webkit-user-select: none;\\r\\n            user-select: none;\\r\\n    background-image: none;\\r\\n    border: 1px solid transparent;\\r\\n    border-radius: 4px;\\r\\n  }\\r\\n  \\r\\n  .btn-primary[_ngcontent-%COMP%] {\\r\\n    color: #fff;\\r\\n    background-color: #337ab7;\\r\\n    border-color: #2e6da4;\\r\\n  }\\r\\n  \\r\\n  .btn-danger[_ngcontent-%COMP%] {\\r\\n    color: #fff;\\r\\n    background-color: #d9534f;\\r\\n    border-color: #d43f3a;\\r\\n  }\\r\\n  \\r\\n  \\r\\n  \\r\\n  .text-danger[_ngcontent-%COMP%] {\\r\\n    color: #d9534f;\\r\\n  }\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJhZG5pY2ktYWdlbmNpamEuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLGFBQWE7SUFDYixzQkFBc0I7SUFDdEIsbUJBQW1CO0VBQ3JCOztFQUVBLG9CQUFvQjs7RUFDcEI7SUFDRSxjQUFjO0VBQ2hCOztFQUVBLG9CQUFvQjs7RUFDcEI7SUFDRSxXQUFXO0lBQ1gseUJBQXlCO0VBQzNCOztFQUVBO0lBQ0UsWUFBWTtJQUNaLGdCQUFnQjtJQUNoQiw2QkFBNkI7RUFDL0I7O0VBRUE7SUFDRSx5QkFBeUI7RUFDM0I7O0VBRUEsc0JBQXNCOztFQUN0QjtJQUNFLHFCQUFxQjtJQUNyQixpQkFBaUI7SUFDakIsZ0JBQWdCO0lBQ2hCLGVBQWU7SUFDZixtQkFBbUI7SUFDbkIsdUJBQXVCO0lBQ3ZCLGtCQUFrQjtJQUNsQixtQkFBbUI7SUFDbkIsc0JBQXNCO0lBQ3RCLGVBQWU7SUFDZix5QkFBaUI7WUFBakIsaUJBQWlCO0lBQ2pCLHNCQUFzQjtJQUN0Qiw2QkFBNkI7SUFDN0Isa0JBQWtCO0VBQ3BCOztFQUVBO0lBQ0UsV0FBVztJQUNYLHlCQUF5QjtJQUN6QixxQkFBcUI7RUFDdkI7O0VBRUE7SUFDRSxXQUFXO0lBQ1gseUJBQXlCO0lBQ3pCLHFCQUFxQjtFQUN2Qjs7RUFFQSw0QkFBNEI7O0VBQzVCO0lBQ0UsY0FBYztFQUNoQiIsImZpbGUiOiJyYWRuaWNpLWFnZW5jaWphLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY29udGFpbmVyIHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICB9XHJcbiAgXHJcbiAgLyogQWRkIHNvbWUgbWFyZ2luICovXHJcbiAgLmNvbnRhaW5lciA+ICoge1xyXG4gICAgbWFyZ2luOiAxMHB4IDA7XHJcbiAgfVxyXG4gIFxyXG4gIC8qIFN0eWxlIHRoZSB0YWJsZSAqL1xyXG4gIHRhYmxlIHtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtcclxuICB9XHJcbiAgXHJcbiAgdGgsIHRkIHtcclxuICAgIHBhZGRpbmc6IDhweDtcclxuICAgIHRleHQtYWxpZ246IGxlZnQ7XHJcbiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2RkZDtcclxuICB9XHJcbiAgXHJcbiAgdGgge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2YyZjJmMjtcclxuICB9XHJcbiAgXHJcbiAgLyogU3R5bGUgdGhlIGJ1dHRvbnMgKi9cclxuICAuYnRuIHtcclxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICAgIHBhZGRpbmc6IDZweCAxMnB4O1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMDtcclxuICAgIGZvbnQtc2l6ZTogMTRweDtcclxuICAgIGZvbnQtd2VpZ2h0OiBub3JtYWw7XHJcbiAgICBsaW5lLWhlaWdodDogMS40Mjg1NzE0MztcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XHJcbiAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xyXG4gICAgY3Vyc29yOiBwb2ludGVyO1xyXG4gICAgdXNlci1zZWxlY3Q6IG5vbmU7XHJcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiBub25lO1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgdHJhbnNwYXJlbnQ7XHJcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgfVxyXG4gIFxyXG4gIC5idG4tcHJpbWFyeSB7XHJcbiAgICBjb2xvcjogI2ZmZjtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICMzMzdhYjc7XHJcbiAgICBib3JkZXItY29sb3I6ICMyZTZkYTQ7XHJcbiAgfVxyXG4gIFxyXG4gIC5idG4tZGFuZ2VyIHtcclxuICAgIGNvbG9yOiAjZmZmO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2Q5NTM0ZjtcclxuICAgIGJvcmRlci1jb2xvcjogI2Q0M2YzYTtcclxuICB9XHJcbiAgXHJcbiAgLyogU3R5bGUgdGhlIGVycm9yIG1lc3NhZ2UgKi9cclxuICAudGV4dC1kYW5nZXIge1xyXG4gICAgY29sb3I6ICNkOTUzNGY7XHJcbiAgfSJdfQ== */\"]\n});","map":{"version":3,"mappings":";AAGA,SAASA,QAAT,QAAyB,oBAAzB;;;;;;;;;;;;ICQEC;;;;;;IAIAA;IAA+BA;IAAuBA;;;;ADFxD,OAAM,MAAOC,wBAAP,CAA+B;EACnCC,YACUC,YADV,EAEUC,cAFV,EAGUC,aAHV,EAIUC,KAJV,EAIuB;IAHb;IACA;IACA;IACA;IAmGV,eAAoB,EAApB;IACA,gBAAqB,IAAIP,QAAJ,EAArB;IAEA,mBAAuB,KAAvB;IAEA,WAAc,EAAd;IACA,eAAkB,EAAlB;IACA,YAAe,EAAf;IACA,eAAkB,EAAlB;IACA,uBAA0B,EAA1B;IAEA,kBAAqB,CAArB;IAEA,cAAiB,EAAjB;EA/GI;;EAEJQ,QAAQ;IACN,IAAIC,aAAa,GAAGC,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAApB;IAEA,KAAKN,cAAL,CACGO,eADH,CACmBH,aADnB,EAEGI,SAFH,CAEcC,QAAD,IAAuB;MAChC,KAAKA,QAAL,GAAgBA,QAAhB;IACD,CAJH;IAMA,KAAKV,YAAL,CACGW,sBADH,CAC0BN,aAD1B,EAEGI,SAFH,CAEcG,OAAD,IAAsB;MAC/B,KAAKA,OAAL,GAAeA,OAAf;IACD,CAJH;EAKD;;EAEDC,aAAa,CAACC,MAAD,EAAe;IAC1B,KAAKd,YAAL,CAAkBa,aAAlB,CAAgCC,MAAM,CAACC,GAAvC,EAA4CN,SAA5C,CAAuDK,MAAD,IAAmB;MACvE,KAAKd,YAAL,CACGW,sBADH,CAC0B,KAAKD,QAAL,CAAcL,aADxC,EAEGI,SAFH,CAEcG,OAAD,IAAsB;QAC/B,KAAKA,OAAL,GAAeA,OAAf;MACD,CAJH;IAKD,CAND;EAOD;;EAEDI,aAAa,CAACF,MAAD,EAAe;IAC1B,KAAKd,YAAL,CAAkBiB,eAAlB,CAAkCH,MAAlC,EAA0CL,SAA1C,CAAqDK,MAAD,IAAmB;MACrE,KAAKd,YAAL,CACGW,sBADH,CAC0B,KAAKD,QAAL,CAAcL,aADxC,EAEGI,SAFH,CAEcG,OAAD,IAAsB;QAC/B,KAAKA,OAAL,GAAeA,OAAf;MACD,CAJH;IAKD,CAND;IAOA,KAAKM,WAAL,GAAmB,KAAnB;EACD;;EAEKC,YAAY;IAAA;;IAAA;MAChB,MAAML,MAAM,GAAG;QACbM,OAAO,EAAE,KAAI,CAACA,OADD;QAEbC,IAAI,EAAE,KAAI,CAACA,IAFE;QAGbC,GAAG,EAAE,KAAI,CAACA,GAHG;QAIbC,OAAO,EAAE,KAAI,CAACA;MAJD,CAAf;MAOA,IAAIC,OAAO,SAAS,KAAI,CAACtB,aAAL,CAAmBuB,aAAnB,CAAiCX,MAAjC,CAApB;;MACA,IAAIU,OAAO,IAAI,IAAf,EAAqB;QACnB,KAAI,CAACE,MAAL,GAAcF,OAAd;QACA;MACD;;MACD,KAAI,CAACxB,YAAL,CACGmB,YADH,CAEI,KAAI,CAACG,GAFT,EAGI,KAAI,CAACC,OAHT,EAII,KAAI,CAACF,IAJT,EAKI,KAAI,CAACD,OALT,EAMI,KAAI,CAACO,eANT,EAOI,KAAI,CAACjB,QAAL,CAAcL,aAPlB,EASGI,SATH,CAScK,MAAD,IAAmB;QAC5Bc,KAAK,CAAC,6BAAD,CAAL;;QACA,KAAI,CAAC5B,YAAL,CACGW,sBADH,CAC0B,KAAI,CAACD,QAAL,CAAcL,aADxC,EAEGI,SAFH,CAEcG,OAAD,IAAsB;UAC/B,KAAI,CAACA,OAAL,GAAeA,OAAf;QACD,CAJH;MAKD,CAhBH;;MAkBA,KAAI,CAACU,GAAL,GAAW,EAAX;MACA,KAAI,CAACC,OAAL,GAAe,EAAf;MACA,KAAI,CAACF,IAAL,GAAY,EAAZ;MACA,KAAI,CAACD,OAAL,GAAe,EAAf;MACA,KAAI,CAACO,eAAL,GAAuB,EAAvB;MACA,KAAI,CAACD,MAAL,GAAc,EAAd;IApCgB;EAqCjB;;EAEDG,aAAa;IACX,IAAI,KAAKnB,QAAL,CAAcoB,MAAd,IAAwB,CAA5B,EAA+B;MAC7BF,KAAK,CACH,0GADG,CAAL;MAGA;IACD;;IACD,KAAK3B,cAAL,CACG8B,eADH,CACmB,KAAKrB,QAAL,CAAcL,aADjC,EACgD,QADhD,EAC0D,KAAK2B,UAD/D,EAEGvB,SAFH,CAEcwB,GAAD,IAAQ;MACjBL,KAAK,CAAC,6DAAD,CAAL;MACA,KAAKI,UAAL,GAAkB,CAAlB;IACD,CALH;EAMD;;EAEDE,MAAM;IACJ5B,cAAc,CAAC6B,KAAf;IACA,KAAKhC,KAAL,CAAWiC,QAAX,CAAoB,CAAC,GAAD,CAApB;EACD;;AAtGkC;;;mBAAxBtC,0BAAwBD;AAAA;;;QAAxBC;EAAwBuC;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCbrC5C,0CAAiD,CAAjD,EAAiD,wBAAjD;MAEAA,+BAAuB,CAAvB,EAAuB,KAAvB,EAAuB,CAAvB,EAAuB,CAAvB,EAAuB,KAAvB,EAAuB,CAAvB,EAAuB,CAAvB,EAAuB,IAAvB;MAGUA;MAAkCA;MACtCA;MAAIA;MAAkDA;MACtDA;MACFA;MAGFA;MAIAA;MACAA;MAEAA,gCAAiB,EAAjB,EAAiB,KAAjB,EAAiB,CAAjB,EAAiB,EAAjB,EAAiB,IAAjB;MAEQA;MAAaA;MACjBA,6BAEQ,EAFR,EAEQ,IAFR;MAIFA;MAEAA,gCAAsB,EAAtB,EAAsB,IAAtB;MACMA;MAAsCA;MAC1CA,gCAAiB,EAAjB,EAAiB,KAAjB,EAAiB,CAAjB;MAEIA;MAAaA;MAA0CA;QAAA;MAAA;MAA1CA;MAAoEA;MACnFA;MACAA,gCAAsB,EAAtB,EAAsB,QAAtB,EAAsB,EAAtB;MACkCA;QAAA,OAAS6C,mBAAT;MAAwB,CAAxB;MAA0B7C;MAAcA;MAMhFA,gCAAiB,EAAjB,EAAiB,KAAjB,EAAiB,CAAjB,EAAiB,EAAjB,EAAiB,GAAjB,EAAiB,EAAjB;MAE2BA;MAAYA;;;;MArC/BA;MAAAA;MACAA;MAAAA;MAKAA;MAAAA;MAIJA;MAAAA;MAgB2DA;MAAAA;MAWpCA;MAAAA","names":["Agencija","i0","RadniciAgencijaComponent","constructor","radnikServis","agencijaServis","proveraServis","ruter","ngOnInit","korisnickoIme","sessionStorage","getItem","dohvatiAgenciju","subscribe","agencija","dohvatiRadnikeAgencije","radnici","obrisiRadnika","radnik","_id","izmeniRadnika","azurirajRadnika","rezimIzmene","dodajRadnika","telefon","mejl","ime","prezime","provera","proveraRadnik","greska","specijalizacija","alert","posaljiZahtev","zahtev","azurirajPodatak","prosirenje","res","odjava","clear","navigate","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\kosov\\OneDrive\\Dokumenti\\UredjivanjeProstoraAPP\\frontend\\src\\app\\radnici-agencija\\radnici-agencija.component.ts","C:\\Users\\kosov\\OneDrive\\Dokumenti\\UredjivanjeProstoraAPP\\frontend\\src\\app\\radnici-agencija\\radnici-agencija.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { RadnikService } from '../services/radnik.service';\nimport { Radnik } from '../models/radnik';\nimport { Agencija } from '../models/agencija';\nimport { AgencijaService } from '../services/agencija.service';\nimport { ProveraService } from '../services/provera.service';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-radnici-agencija',\n  templateUrl: './radnici-agencija.component.html',\n  styleUrls: ['./radnici-agencija.component.css'],\n})\nexport class RadniciAgencijaComponent implements OnInit {\n  constructor(\n    private radnikServis: RadnikService,\n    private agencijaServis: AgencijaService,\n    private proveraServis: ProveraService,\n    private ruter: Router\n  ) {}\n\n  ngOnInit(): void {\n    let korisnickoIme = sessionStorage.getItem('korisnik');\n\n    this.agencijaServis\n      .dohvatiAgenciju(korisnickoIme)\n      .subscribe((agencija: Agencija) => {\n        this.agencija = agencija;\n      });\n\n    this.radnikServis\n      .dohvatiRadnikeAgencije(korisnickoIme)\n      .subscribe((radnici: Radnik[]) => {\n        this.radnici = radnici;\n      });\n  }\n\n  obrisiRadnika(radnik: Radnik) {\n    this.radnikServis.obrisiRadnika(radnik._id).subscribe((radnik: Radnik) => {\n      this.radnikServis\n        .dohvatiRadnikeAgencije(this.agencija.korisnickoIme)\n        .subscribe((radnici: Radnik[]) => {\n          this.radnici = radnici;\n        });\n    });\n  }\n\n  izmeniRadnika(radnik: Radnik) {\n    this.radnikServis.azurirajRadnika(radnik).subscribe((radnik: Radnik) => {\n      this.radnikServis\n        .dohvatiRadnikeAgencije(this.agencija.korisnickoIme)\n        .subscribe((radnici: Radnik[]) => {\n          this.radnici = radnici;\n        });\n    });\n    this.rezimIzmene = false;\n  }\n\n  async dodajRadnika() {\n    const radnik = {\n      telefon: this.telefon,\n      mejl: this.mejl,\n      ime: this.ime,\n      prezime: this.prezime,\n    };\n\n    let provera = await this.proveraServis.proveraRadnik(radnik);\n    if (provera != 'ok') {\n      this.greska = provera;\n      return;\n    }\n    this.radnikServis\n      .dodajRadnika(\n        this.ime,\n        this.prezime,\n        this.mejl,\n        this.telefon,\n        this.specijalizacija,\n        this.agencija.korisnickoIme\n      )\n      .subscribe((radnik: Radnik) => {\n        alert('Uspesno ste dodali radnika!');\n        this.radnikServis\n          .dohvatiRadnikeAgencije(this.agencija.korisnickoIme)\n          .subscribe((radnici: Radnik[]) => {\n            this.radnici = radnici;\n          });\n      });\n\n    this.ime = '';\n    this.prezime = '';\n    this.mejl = '';\n    this.telefon = '';\n    this.specijalizacija = '';\n    this.greska = '';\n  }\n\n  posaljiZahtev() {\n    if (this.agencija.zahtev != 0) {\n      alert(\n        'Vec ste poslali zahtev za prosirenje broja radnih mesta!\\nAdministratori ce uskoro razmotriti vas zahtev'\n      );\n      return;\n    }\n    this.agencijaServis\n      .azurirajPodatak(this.agencija.korisnickoIme, 'zahtev', this.prosirenje)\n      .subscribe((res) => {\n        alert('Uspesno ste poslali zahtev za povecanje broja radnih mesta!');\n        this.prosirenje = 0;\n      });\n  }\n\n  odjava() {\n    sessionStorage.clear();\n    this.ruter.navigate(['/']);\n  }\n\n  radnici: Radnik[] = [];\n  agencija: Agencija = new Agencija();\n\n  rezimIzmene: boolean = false;\n\n  ime: string = '';\n  prezime: string = '';\n  mejl: string = '';\n  telefon: string = '';\n  specijalizacija: string = '';\n\n  prosirenje: number = 0;\n\n  greska: string = '';\n}\n","<app-zaglavlje-agencija></app-zaglavlje-agencija>\n<app-zaglavlje-agencija></app-zaglavlje-agencija>\n<div class=\"container\">\n  <div class=\"row\">\n    <div class=\"col-md-12\">\n      <h4>Broj radnika: {{ radnici.length }}</h4>\n      <h4>Kapacitet radnika: {{ agencija.kapacitetRadnika }}</h4>\n      <hr>\n    </div>\n  </div>\n\n  <table *ngIf=\"radnici.length > 0\" class=\"table table-striped\">\n    <!-- table content -->\n  </table>\n\n  <p *ngIf=\"radnici.length == 0\">Trenutno nemate radnika</p>\n  <hr>\n\n  <div class=\"row\">\n    <div class=\"col-md-6\">\n      <h2>Dodaj radnika</h2>\n      <table class=\"table\">\n        <!-- form inputs for adding a new worker -->\n      </table>\n      <hr>\n    </div>\n\n    <div class=\"col-md-6\">\n      <h2>Zahtevaj proširenje kapaciteta radnika</h2>\n      <div class=\"row\">\n        <div class=\"col-md-8\">\n          Zahtevaj još <input type=\"number\" class=\"form-control\" [(ngModel)]=\"prosirenje\"> radnika\n        </div>\n        <div class=\"col-md-4\">\n          <button class=\"btn btn-primary\" (click)=\"posaljiZahtev()\">Pošalji zahtev</button>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"row\">\n    <div class=\"col-md-12\">\n      <p class=\"text-danger\">{{ greska }}</p>\n    </div>\n  </div>\n</div>\n"]},"metadata":{},"sourceType":"module"}