{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/kosov/OneDrive/Dokumenti/UredjivanjeProstoraAPP/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/klijent.service\";\nimport * as i2 from \"../services/agencija.service\";\nimport * as i3 from \"../services/provera.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\n\nfunction AzuriranjeAdminComponent_tr_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2, \"Ime\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\")(4, \"input\", 1);\n    i0.ɵɵlistener(\"ngModelChange\", function AzuriranjeAdminComponent_tr_16_Template_input_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.ime = $event);\n    });\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.ime);\n  }\n}\n\nfunction AzuriranjeAdminComponent_tr_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2, \"Prezime\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\")(4, \"input\", 1);\n    i0.ɵɵlistener(\"ngModelChange\", function AzuriranjeAdminComponent_tr_17_Template_input_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.prezime = $event);\n    });\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.prezime);\n  }\n}\n\nfunction AzuriranjeAdminComponent_tr_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2, \"Naziv agencije\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\")(4, \"input\", 1);\n    i0.ɵɵlistener(\"ngModelChange\", function AzuriranjeAdminComponent_tr_18_Template_input_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.naziv = $event);\n    });\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.naziv);\n  }\n}\n\nfunction AzuriranjeAdminComponent_tr_19_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2, \"Ulica i broj\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\")(4, \"input\", 1);\n    i0.ɵɵlistener(\"ngModelChange\", function AzuriranjeAdminComponent_tr_19_Template_input_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.ulica = $event);\n    });\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r3.ulica);\n  }\n}\n\nfunction AzuriranjeAdminComponent_tr_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2, \"Grad\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\")(4, \"input\", 1);\n    i0.ɵɵlistener(\"ngModelChange\", function AzuriranjeAdminComponent_tr_20_Template_input_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.grad = $event);\n    });\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r4.grad);\n  }\n}\n\nfunction AzuriranjeAdminComponent_tr_21_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2, \"Drzava\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\")(4, \"input\", 1);\n    i0.ɵɵlistener(\"ngModelChange\", function AzuriranjeAdminComponent_tr_21_Template_input_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r18 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r18.drzava = $event);\n    });\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r5.drzava);\n  }\n}\n\nfunction AzuriranjeAdminComponent_tr_22_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r21 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2, \"Maticni broj agencije\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\")(4, \"input\", 1);\n    i0.ɵɵlistener(\"ngModelChange\", function AzuriranjeAdminComponent_tr_22_Template_input_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r21);\n      const ctx_r20 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r20.maticniBroj = $event);\n    });\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r6.maticniBroj);\n  }\n}\n\nfunction AzuriranjeAdminComponent_tr_23_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2, \"Kratak opis agencije\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\")(4, \"textarea\", 5);\n    i0.ɵɵlistener(\"ngModelChange\", function AzuriranjeAdminComponent_tr_23_Template_textarea_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r23);\n      const ctx_r22 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r22.opis = $event);\n    });\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r7.opis);\n  }\n}\n\nexport class AzuriranjeAdminComponent {\n  constructor(klijentServis, agencijaService, proveraServis, ruter) {\n    this.klijentServis = klijentServis;\n    this.agencijaService = agencijaService;\n    this.proveraServis = proveraServis;\n    this.ruter = ruter;\n    this.telefon = '';\n    this.mejl = '';\n    this.slika = '';\n    this.ime = '';\n    this.prezime = '';\n    this.naziv = '';\n    this.ulica = '';\n    this.grad = '';\n    this.drzava = '';\n    this.maticniBroj = '';\n    this.opis = '';\n    this.greska = '';\n  }\n\n  ngOnInit() {\n    this.korisnickoIme = sessionStorage.getItem('korisnickoIme');\n    this.tip = sessionStorage.getItem('tip');\n\n    if (this.tip == 'klijent') {\n      this.klijentServis.dohvatiKlijenta(this.korisnickoIme).subscribe(klijent => {\n        this.telefon = klijent.telefon;\n        this.mejl = klijent.mejl;\n        this.slika = klijent.slika;\n        this.ime = klijent.ime;\n        this.prezime = klijent.prezime;\n      });\n    } else {\n      this.agencijaService.dohvatiAgenciju(this.korisnickoIme).subscribe(agencija => {\n        this.telefon = agencija.telefon;\n        this.mejl = agencija.mejl;\n        this.slika = agencija.slika;\n        this.naziv = agencija.naziv;\n        this.ulica = agencija.ulica;\n        this.grad = agencija.grad;\n        this.drzava = agencija.drzava;\n        this.maticniBroj = agencija.maticniBroj;\n        this.opis = agencija.opis;\n      });\n    }\n  }\n\n  otpremanjeFajla(event) {\n    var fajl = event.target.files[0];\n    var citac = new FileReader();\n    citac.readAsDataURL(fajl);\n\n    citac.onload = () => {\n      this.slika = citac.result;\n    };\n  }\n\n  azuriraj() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      if (_this.tip == 'klijent') {\n        const klijent = {\n          korisnickoIme: _this.korisnickoIme,\n          lozinka: '',\n          telefon: _this.telefon,\n          mejl: _this.mejl,\n          slika: _this.slika,\n          ime: _this.ime,\n          prezime: _this.prezime\n        };\n        let provera = yield _this.proveraServis.proveraKlijent(klijent, true);\n\n        if (provera != 'ok') {\n          _this.greska = provera;\n          return;\n        }\n\n        _this.klijentServis.azurirajKlijenta(_this.korisnickoIme, _this.telefon, _this.mejl, _this.slika, _this.ime, _this.prezime).subscribe(odgovor => {\n          if (odgovor['poruka'] == 'ok') {\n            alert('Uspesno ste azurirali podatke');\n\n            _this.ruter.navigate(['/admin']);\n          } else {\n            alert('Greska pri azuriranju podataka');\n\n            _this.ruter.navigate(['/admin']);\n          }\n        });\n      } else {\n        const agencija = {\n          korisnickoIme: _this.korisnickoIme,\n          lozinka: '',\n          telefon: _this.telefon,\n          mejl: _this.mejl,\n          slika: _this.slika,\n          naziv: _this.naziv,\n          ulica: _this.ulica,\n          grad: _this.grad,\n          drzava: _this.drzava,\n          maticniBroj: _this.maticniBroj,\n          opis: _this.opis\n        };\n        let provera = yield _this.proveraServis.proveraAgencija(agencija, true);\n\n        if (provera != 'ok') {\n          _this.greska = provera;\n          return;\n        }\n\n        _this.agencijaService.azurirajAgenciju(_this.korisnickoIme, _this.telefon, _this.mejl, _this.slika, _this.naziv, _this.ulica, _this.grad, _this.drzava, _this.maticniBroj, _this.opis).subscribe(odgovor => {\n          if (odgovor['poruka'] == 'ok') {\n            alert('Uspesno ste azurirali podatke');\n\n            _this.ruter.navigate(['/admin']);\n          } else {\n            alert('Greska pri azuriranju podataka');\n\n            _this.ruter.navigate(['/admin']);\n          }\n        });\n      }\n    })();\n  }\n\n  odustani() {\n    this.ruter.navigate(['/admin']);\n  }\n\n}\n\nAzuriranjeAdminComponent.ɵfac = function AzuriranjeAdminComponent_Factory(t) {\n  return new (t || AzuriranjeAdminComponent)(i0.ɵɵdirectiveInject(i1.KlijentService), i0.ɵɵdirectiveInject(i2.AgencijaService), i0.ɵɵdirectiveInject(i3.ProveraService), i0.ɵɵdirectiveInject(i4.Router));\n};\n\nAzuriranjeAdminComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AzuriranjeAdminComponent,\n  selectors: [[\"app-azuriranje-admin\"]],\n  decls: 37,\n  vars: 12,\n  consts: [[\"type\", \"text\", \"disabled\", \"true\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", 3, \"ngModel\", \"ngModelChange\"], [4, \"ngIf\"], [\"type\", \"file\", 3, \"change\"], [3, \"click\"], [3, \"ngModel\", \"ngModelChange\"]],\n  template: function AzuriranjeAdminComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"table\")(1, \"tr\")(2, \"td\");\n      i0.ɵɵtext(3, \"Korisnicko ime\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"td\")(5, \"input\", 0);\n      i0.ɵɵlistener(\"ngModelChange\", function AzuriranjeAdminComponent_Template_input_ngModelChange_5_listener($event) {\n        return ctx.korisnickoIme = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(6, \"tr\")(7, \"td\");\n      i0.ɵɵtext(8, \"Kontakt telefon\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"td\")(10, \"input\", 1);\n      i0.ɵɵlistener(\"ngModelChange\", function AzuriranjeAdminComponent_Template_input_ngModelChange_10_listener($event) {\n        return ctx.telefon = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(11, \"tr\")(12, \"td\");\n      i0.ɵɵtext(13, \"Mejl\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"td\")(15, \"input\", 1);\n      i0.ɵɵlistener(\"ngModelChange\", function AzuriranjeAdminComponent_Template_input_ngModelChange_15_listener($event) {\n        return ctx.mejl = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵtemplate(16, AzuriranjeAdminComponent_tr_16_Template, 5, 1, \"tr\", 2);\n      i0.ɵɵtemplate(17, AzuriranjeAdminComponent_tr_17_Template, 5, 1, \"tr\", 2);\n      i0.ɵɵtemplate(18, AzuriranjeAdminComponent_tr_18_Template, 5, 1, \"tr\", 2);\n      i0.ɵɵtemplate(19, AzuriranjeAdminComponent_tr_19_Template, 5, 1, \"tr\", 2);\n      i0.ɵɵtemplate(20, AzuriranjeAdminComponent_tr_20_Template, 5, 1, \"tr\", 2);\n      i0.ɵɵtemplate(21, AzuriranjeAdminComponent_tr_21_Template, 5, 1, \"tr\", 2);\n      i0.ɵɵtemplate(22, AzuriranjeAdminComponent_tr_22_Template, 5, 1, \"tr\", 2);\n      i0.ɵɵtemplate(23, AzuriranjeAdminComponent_tr_23_Template, 5, 1, \"tr\", 2);\n      i0.ɵɵelementStart(24, \"tr\")(25, \"td\");\n      i0.ɵɵtext(26, \"Profilna slika\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(27, \"td\")(28, \"input\", 3);\n      i0.ɵɵlistener(\"change\", function AzuriranjeAdminComponent_Template_input_change_28_listener($event) {\n        return ctx.otpremanjeFajla($event);\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(29, \"tr\")(30, \"td\")(31, \"button\", 4);\n      i0.ɵɵlistener(\"click\", function AzuriranjeAdminComponent_Template_button_click_31_listener() {\n        return ctx.azuriraj();\n      });\n      i0.ɵɵtext(32, \"Azuriraj\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(33, \"td\")(34, \"button\", 4);\n      i0.ɵɵlistener(\"click\", function AzuriranjeAdminComponent_Template_button_click_34_listener() {\n        return ctx.odustani();\n      });\n      i0.ɵɵtext(35, \"Odustani\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵtext(36);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.korisnickoIme);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.telefon);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.mejl);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.tip == \"klijent\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.tip == \"klijent\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.tip == \"agencija\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.tip == \"agencija\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.tip == \"agencija\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.tip == \"agencija\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.tip == \"agencija\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.tip == \"agencija\");\n      i0.ɵɵadvance(13);\n      i0.ɵɵtextInterpolate1(\"\\n\", ctx.greska, \"\\n\");\n    }\n  },\n  dependencies: [i5.NgIf, i6.DefaultValueAccessor, i6.NgControlStatus, i6.NgModel],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhenVyaXJhbmplLWFkbWluLmNvbXBvbmVudC5jc3MifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","AzuriranjeAdminComponent","constructor","klijentServis","agencijaService","proveraServis","ruter","ngOnInit","korisnickoIme","sessionStorage","getItem","tip","dohvatiKlijenta","subscribe","klijent","telefon","mejl","slika","ime","prezime","dohvatiAgenciju","agencija","naziv","ulica","grad","drzava","maticniBroj","opis","otpremanjeFajla","event","fajl","target","files","citac","FileReader","readAsDataURL","onload","result","azuriraj","lozinka","provera","proveraKlijent","greska","azurirajKlijenta","odgovor","alert","navigate","proveraAgencija","azurirajAgenciju","odustani","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\kosov\\OneDrive\\Dokumenti\\UredjivanjeProstoraAPP\\frontend\\src\\app\\azuriranje-admin\\azuriranje-admin.component.html","C:\\Users\\kosov\\OneDrive\\Dokumenti\\UredjivanjeProstoraAPP\\frontend\\src\\app\\azuriranje-admin\\azuriranje-admin.component.ts"],"sourcesContent":["<table>\n    <tr>\n        <td>Korisnicko ime</td>\n        <td><input type=\"text\" [(ngModel)]=\"korisnickoIme\" disabled=\"true\"></td>\n    </tr>\n    <tr>\n        <td>Kontakt telefon</td>\n        <td><input type=\"text\" [(ngModel)]=\"telefon\"></td>\n    </tr>\n    <tr>\n        <td>Mejl</td>\n        <td><input type=\"text\" [(ngModel)]=\"mejl\"></td>\n    </tr>\n    <tr *ngIf=\"tip=='klijent'\">\n        <td>Ime</td>\n        <td><input type=\"text\" [(ngModel)]=\"ime\"></td>\n    </tr>\n    <tr *ngIf=\"tip=='klijent'\">\n        <td>Prezime</td>\n        <td><input type=\"text\" [(ngModel)]=\"prezime\"></td>\n    </tr>\n    <tr *ngIf=\"tip=='agencija'\">\n        <td>Naziv agencije</td>\n        <td><input type=\"text\" [(ngModel)]=\"naziv\"></td>\n    </tr>\n    <tr *ngIf=\"tip=='agencija'\">\n        <td>Ulica i broj</td>\n        <td><input type=\"text\" [(ngModel)]=\"ulica\"></td>\n    </tr>\n    <tr *ngIf=\"tip=='agencija'\">\n        <td>Grad</td>\n        <td><input type=\"text\" [(ngModel)]=\"grad\"></td>\n    </tr>\n    <tr *ngIf=\"tip=='agencija'\">\n        <td>Drzava</td>\n        <td><input type=\"text\" [(ngModel)]=\"drzava\"></td>\n    </tr>\n    <tr *ngIf=\"tip=='agencija'\">\n        <td>Maticni broj agencije</td>\n        <td><input type=\"text\" [(ngModel)]=\"maticniBroj\"></td>\n    </tr>\n    <tr *ngIf=\"tip=='agencija'\">\n        <td>Kratak opis agencije</td>\n        <td><textarea [(ngModel)]=\"opis\"></textarea></td>\n    </tr>\n    <tr>\n        <td>Profilna slika</td>\n        <td><input type=\"file\" (change)=\"otpremanjeFajla($event)\"></td>\n    </tr>\n    <tr>\n        <td><button (click)=\"azuriraj()\">Azuriraj</button></td>\n        <td><button (click)=\"odustani()\">Odustani</button></td>\n    </tr>\n</table>\n{{greska}}\n","import { Component, OnInit } from '@angular/core';\nimport { KlijentService } from '../services/klijent.service';\nimport { AgencijaService } from '../services/agencija.service';\nimport { Klijent } from '../models/klijent';\nimport { Agencija } from '../models/agencija';\nimport { Router } from '@angular/router';\nimport { ProveraService } from '../services/provera.service';\n\n@Component({\n  selector: 'app-azuriranje-admin',\n  templateUrl: './azuriranje-admin.component.html',\n  styleUrls: ['./azuriranje-admin.component.css'],\n})\nexport class AzuriranjeAdminComponent implements OnInit {\n  constructor(\n    private klijentServis: KlijentService,\n    private agencijaService: AgencijaService,\n    private proveraServis: ProveraService,\n    private ruter: Router\n  ) {}\n\n  ngOnInit(): void {\n    this.korisnickoIme = sessionStorage.getItem('korisnickoIme');\n    this.tip = sessionStorage.getItem('tip');\n    if (this.tip == 'klijent') {\n      this.klijentServis\n        .dohvatiKlijenta(this.korisnickoIme)\n        .subscribe((klijent: Klijent) => {\n          this.telefon = klijent.telefon;\n          this.mejl = klijent.mejl;\n          this.slika = klijent.slika;\n          this.ime = klijent.ime;\n          this.prezime = klijent.prezime;\n        });\n    } else {\n      this.agencijaService\n        .dohvatiAgenciju(this.korisnickoIme)\n        .subscribe((agencija: Agencija) => {\n          this.telefon = agencija.telefon;\n          this.mejl = agencija.mejl;\n          this.slika = agencija.slika;\n          this.naziv = agencija.naziv;\n          this.ulica = agencija.ulica;\n          this.grad = agencija.grad;\n          this.drzava = agencija.drzava;\n          this.maticniBroj = agencija.maticniBroj;\n          this.opis = agencija.opis;\n        });\n    }\n  }\n\n  otpremanjeFajla(event) {\n    var fajl = event.target.files[0];\n    var citac = new FileReader();\n    citac.readAsDataURL(fajl);\n    citac.onload = () => {\n      this.slika = citac.result as string;\n    };\n  }\n\n  async azuriraj() {\n    if (this.tip == 'klijent') {\n      const klijent = {\n        korisnickoIme: this.korisnickoIme,\n        lozinka: '',\n        telefon: this.telefon,\n        mejl: this.mejl,\n        slika: this.slika,\n        ime: this.ime,\n        prezime: this.prezime,\n      };\n\n      let provera = await this.proveraServis.proveraKlijent(klijent, true);\n      if (provera != 'ok') {\n        this.greska = provera;\n        return;\n      }\n\n      this.klijentServis\n        .azurirajKlijenta(\n          this.korisnickoIme,\n          this.telefon,\n          this.mejl,\n          this.slika,\n          this.ime,\n          this.prezime\n        )\n        .subscribe((odgovor) => {\n          if (odgovor['poruka'] == 'ok') {\n            alert('Uspesno ste azurirali podatke');\n            this.ruter.navigate(['/admin']);\n          } else {\n            alert('Greska pri azuriranju podataka');\n            this.ruter.navigate(['/admin']);\n          }\n        });\n    } else {\n      const agencija = {\n        korisnickoIme: this.korisnickoIme,\n        lozinka: '',\n        telefon: this.telefon,\n        mejl: this.mejl,\n        slika: this.slika,\n        naziv: this.naziv,\n        ulica: this.ulica,\n        grad: this.grad,\n        drzava: this.drzava,\n        maticniBroj: this.maticniBroj,\n        opis: this.opis,\n      };\n\n      let provera = await this.proveraServis.proveraAgencija(agencija, true);\n      if (provera != 'ok') {\n        this.greska = provera;\n        return;\n      }\n      this.agencijaService\n        .azurirajAgenciju(\n          this.korisnickoIme,\n          this.telefon,\n          this.mejl,\n          this.slika,\n          this.naziv,\n          this.ulica,\n          this.grad,\n          this.drzava,\n          this.maticniBroj,\n          this.opis\n        )\n        .subscribe((odgovor) => {\n          if (odgovor['poruka'] == 'ok') {\n            alert('Uspesno ste azurirali podatke');\n            this.ruter.navigate(['/admin']);\n          } else {\n            alert('Greska pri azuriranju podataka');\n            this.ruter.navigate(['/admin']);\n          }\n        });\n    }\n  }\n  odustani() {\n    this.ruter.navigate(['/admin']);\n  }\n\n  korisnickoIme: string;\n  tip: string;\n\n  telefon: string = '';\n  mejl: string = '';\n  slika: string = '';\n\n  ime: string = '';\n  prezime: string = '';\n\n  naziv: string = '';\n  ulica: string = '';\n  grad: string = '';\n  drzava: string = '';\n  maticniBroj: string = '';\n  opis: string = '';\n\n  greska: string = '';\n}\n"]},"metadata":{},"sourceType":"module"}