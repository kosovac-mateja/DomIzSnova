{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/kosov/OneDrive/Dokumenti/UredjivanjeProstoraAPP/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/korisnik.service\";\nimport * as i2 from \"../services/klijent.service\";\nimport * as i3 from \"../services/agencija.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\n\nfunction RegistracijaComponent_tr_32_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2, \"Ime\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\")(4, \"input\", 3);\n    i0.ɵɵlistener(\"ngModelChange\", function RegistracijaComponent_tr_32_Template_input_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.ime = $event);\n    });\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.ime);\n  }\n}\n\nfunction RegistracijaComponent_tr_33_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2, \"Prezime\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\")(4, \"input\", 3);\n    i0.ɵɵlistener(\"ngModelChange\", function RegistracijaComponent_tr_33_Template_input_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.prezime = $event);\n    });\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.prezime);\n  }\n}\n\nfunction RegistracijaComponent_tr_34_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2, \"Naziv agencije\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\")(4, \"input\", 3);\n    i0.ɵɵlistener(\"ngModelChange\", function RegistracijaComponent_tr_34_Template_input_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.naziv = $event);\n    });\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.naziv);\n  }\n}\n\nfunction RegistracijaComponent_tr_35_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2, \"Ulica i broj\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\")(4, \"input\", 3);\n    i0.ɵɵlistener(\"ngModelChange\", function RegistracijaComponent_tr_35_Template_input_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.ulica = $event);\n    });\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r3.ulica);\n  }\n}\n\nfunction RegistracijaComponent_tr_36_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2, \"Grad\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\")(4, \"input\", 3);\n    i0.ɵɵlistener(\"ngModelChange\", function RegistracijaComponent_tr_36_Template_input_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.grad = $event);\n    });\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r4.grad);\n  }\n}\n\nfunction RegistracijaComponent_tr_37_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2, \"Drzava\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\")(4, \"input\", 3);\n    i0.ɵɵlistener(\"ngModelChange\", function RegistracijaComponent_tr_37_Template_input_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r18 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r18.drzava = $event);\n    });\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r5.drzava);\n  }\n}\n\nfunction RegistracijaComponent_tr_38_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r21 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2, \"Maticni broj agencije\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\")(4, \"input\", 3);\n    i0.ɵɵlistener(\"ngModelChange\", function RegistracijaComponent_tr_38_Template_input_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r21);\n      const ctx_r20 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r20.maticniBroj = $event);\n    });\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r6.maticniBroj);\n  }\n}\n\nfunction RegistracijaComponent_tr_39_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2, \"Kratak opis agencije\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\")(4, \"textarea\", 0);\n    i0.ɵɵlistener(\"ngModelChange\", function RegistracijaComponent_tr_39_Template_textarea_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r23);\n      const ctx_r22 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r22.opis = $event);\n    });\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r7.opis);\n  }\n}\n\nexport class RegistracijaComponent {\n  constructor(korisnikServis, klijentServis, agencijaKlijent, ruter) {\n    this.korisnikServis = korisnikServis;\n    this.klijentServis = klijentServis;\n    this.agencijaKlijent = agencijaKlijent;\n    this.ruter = ruter;\n    this.tip = '';\n    this.korisnickoIme = '';\n    this.lozinka = '';\n    this.potvrdaLozinke = '';\n    this.telefon = '';\n    this.mejl = '';\n    this.slika = ''; //TODO: proveriti da li je dobra dimenzija\n\n    this.ime = '';\n    this.prezime = '';\n    this.naziv = '';\n    this.ulica = '';\n    this.grad = '';\n    this.drzava = '';\n    this.maticniBroj = '';\n    this.opis = '';\n    this.greska = '';\n  }\n\n  ngOnInit() {}\n\n  registracija() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      if (_this.lozinka != _this.potvrdaLozinke) {\n        _this.greska = 'Lozinke se ne poklapaju';\n      }\n\n      if (_this.tip == 'klijent') {\n        const klijent = {\n          korisnickoIme: _this.korisnickoIme,\n          lozinka: _this.lozinka,\n          telefon: _this.telefon,\n          mejl: _this.mejl,\n          slika: _this.slika,\n          status: 'na cekanju',\n          ime: _this.ime,\n          prezime: _this.prezime\n        };\n        let provera = yield _this.klijentServis.provera(klijent);\n\n        if (provera != 'ok') {\n          _this.greska = provera;\n          return;\n        }\n\n        _this.klijentServis.registracija(klijent).subscribe(odgovor => {\n          if (odgovor['poruka'] == 'ok') {\n            _this.greska = '';\n          } else {\n            _this.greska = odgovor['poruka'];\n            return;\n          }\n        });\n\n        _this.korisnikServis.ubaciKorisnika(_this.korisnickoIme, _this.lozinka, _this.tip).subscribe(odgovor => {\n          if (odgovor['poruka'] == 'ok') {\n            alert('Uspesno ste se registrovali\\nAdmini ce vas uskoro odobriti');\n\n            _this.ruter.navigate(['/prijava']);\n          } else {\n            _this.greska = odgovor['poruka'];\n          }\n        });\n      } else if (_this.tip == 'agencija') {\n        const agencija = {\n          korisnickoIme: _this.korisnickoIme,\n          lozinka: _this.lozinka,\n          telefon: _this.telefon,\n          mejl: _this.mejl,\n          slika: _this.slika,\n          status: 'na cekanju',\n          naziv: _this.naziv,\n          ulica: _this.ulica,\n          grad: _this.grad,\n          drzava: _this.drzava,\n          maticniBroj: _this.maticniBroj,\n          opis: _this.opis\n        };\n        let provera = yield _this.agencijaKlijent.provera(agencija);\n\n        if (provera != 'ok') {\n          _this.greska = provera;\n          return;\n        }\n\n        _this.agencijaKlijent.registracija(agencija).subscribe(odgovor => {\n          if (odgovor['poruka'] == 'ok') {\n            _this.greska = '';\n          } else {\n            _this.greska = odgovor['poruka'];\n            return;\n          }\n        });\n\n        _this.korisnikServis.ubaciKorisnika(_this.korisnickoIme, _this.lozinka, _this.tip).subscribe(odgovor => {\n          if (odgovor['poruka'] == 'ok') {\n            alert('Uspesno ste se registrovali\\nAdmini ce vas uskoro odobriti');\n\n            _this.ruter.navigate(['/prijava']);\n          } else {\n            _this.greska = odgovor['poruka'];\n          }\n        });\n      } else {\n        _this.greska = 'Morate izabrati tip korisnika';\n      }\n    })();\n  }\n\n  otpremanjeFajla(event) {\n    var fajl = event.target.files[0];\n    var citac = new FileReader();\n    citac.readAsDataURL(fajl);\n\n    citac.onload = () => {\n      this.slika = citac.result;\n    };\n  }\n\n}\n\nRegistracijaComponent.ɵfac = function RegistracijaComponent_Factory(t) {\n  return new (t || RegistracijaComponent)(i0.ɵɵdirectiveInject(i1.KorisnikService), i0.ɵɵdirectiveInject(i2.KlijentService), i0.ɵɵdirectiveInject(i3.AgencijaService), i0.ɵɵdirectiveInject(i4.Router));\n};\n\nRegistracijaComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: RegistracijaComponent,\n  selectors: [[\"app-registracija\"]],\n  decls: 50,\n  vars: 15,\n  consts: [[3, \"ngModel\", \"ngModelChange\"], [\"value\", \"klijent\"], [\"value\", \"agencija\"], [\"type\", \"text\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"password\", 3, \"ngModel\", \"ngModelChange\"], [4, \"ngIf\"], [\"type\", \"file\", 3, \"change\"], [\"colspan\", \"2\"], [3, \"click\"]],\n  template: function RegistracijaComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtext(0, \"Ja sam\\n\");\n      i0.ɵɵelementStart(1, \"select\", 0);\n      i0.ɵɵlistener(\"ngModelChange\", function RegistracijaComponent_Template_select_ngModelChange_1_listener($event) {\n        return ctx.tip = $event;\n      });\n      i0.ɵɵelementStart(2, \"option\", 1);\n      i0.ɵɵtext(3, \"klijent\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"option\", 2);\n      i0.ɵɵtext(5, \"agencija\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(6, \"table\")(7, \"tr\")(8, \"td\");\n      i0.ɵɵtext(9, \"Korisnicko ime\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"td\")(11, \"input\", 3);\n      i0.ɵɵlistener(\"ngModelChange\", function RegistracijaComponent_Template_input_ngModelChange_11_listener($event) {\n        return ctx.korisnickoIme = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(12, \"tr\")(13, \"td\");\n      i0.ɵɵtext(14, \"Lozinka\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"td\")(16, \"input\", 4);\n      i0.ɵɵlistener(\"ngModelChange\", function RegistracijaComponent_Template_input_ngModelChange_16_listener($event) {\n        return ctx.lozinka = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(17, \"tr\")(18, \"td\");\n      i0.ɵɵtext(19, \"Potvrda lozinke\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"td\")(21, \"input\", 4);\n      i0.ɵɵlistener(\"ngModelChange\", function RegistracijaComponent_Template_input_ngModelChange_21_listener($event) {\n        return ctx.potvrdaLozinke = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(22, \"tr\")(23, \"td\");\n      i0.ɵɵtext(24, \"Kontakt telefon\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(25, \"td\")(26, \"input\", 3);\n      i0.ɵɵlistener(\"ngModelChange\", function RegistracijaComponent_Template_input_ngModelChange_26_listener($event) {\n        return ctx.telefon = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(27, \"tr\")(28, \"td\");\n      i0.ɵɵtext(29, \"Mejl\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(30, \"td\")(31, \"input\", 3);\n      i0.ɵɵlistener(\"ngModelChange\", function RegistracijaComponent_Template_input_ngModelChange_31_listener($event) {\n        return ctx.mejl = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵtemplate(32, RegistracijaComponent_tr_32_Template, 5, 1, \"tr\", 5);\n      i0.ɵɵtemplate(33, RegistracijaComponent_tr_33_Template, 5, 1, \"tr\", 5);\n      i0.ɵɵtemplate(34, RegistracijaComponent_tr_34_Template, 5, 1, \"tr\", 5);\n      i0.ɵɵtemplate(35, RegistracijaComponent_tr_35_Template, 5, 1, \"tr\", 5);\n      i0.ɵɵtemplate(36, RegistracijaComponent_tr_36_Template, 5, 1, \"tr\", 5);\n      i0.ɵɵtemplate(37, RegistracijaComponent_tr_37_Template, 5, 1, \"tr\", 5);\n      i0.ɵɵtemplate(38, RegistracijaComponent_tr_38_Template, 5, 1, \"tr\", 5);\n      i0.ɵɵtemplate(39, RegistracijaComponent_tr_39_Template, 5, 1, \"tr\", 5);\n      i0.ɵɵelementStart(40, \"tr\")(41, \"td\");\n      i0.ɵɵtext(42, \"Profilna slika\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(43, \"td\")(44, \"input\", 6);\n      i0.ɵɵlistener(\"change\", function RegistracijaComponent_Template_input_change_44_listener($event) {\n        return ctx.otpremanjeFajla($event);\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(45, \"tr\")(46, \"td\", 7)(47, \"button\", 8);\n      i0.ɵɵlistener(\"click\", function RegistracijaComponent_Template_button_click_47_listener() {\n        return ctx.registracija();\n      });\n      i0.ɵɵtext(48, \"Registruj se\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵtext(49);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngModel\", ctx.tip);\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"ngModel\", ctx.korisnickoIme);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.lozinka);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.potvrdaLozinke);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.telefon);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.mejl);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.tip == \"klijent\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.tip == \"klijent\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.tip == \"agencija\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.tip == \"agencija\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.tip == \"agencija\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.tip == \"agencija\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.tip == \"agencija\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.tip == \"agencija\");\n      i0.ɵɵadvance(10);\n      i0.ɵɵtextInterpolate1(\"\\n\", ctx.greska, \"\\n\");\n    }\n  },\n  dependencies: [i5.NgIf, i6.NgSelectOption, i6.ɵNgSelectMultipleOption, i6.DefaultValueAccessor, i6.SelectControlValueAccessor, i6.NgControlStatus, i6.NgModel],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJyZWdpc3RyYWNpamEuY29tcG9uZW50LmNzcyJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","RegistracijaComponent","constructor","korisnikServis","klijentServis","agencijaKlijent","ruter","ngOnInit","registracija","lozinka","potvrdaLozinke","greska","tip","klijent","korisnickoIme","telefon","mejl","slika","status","ime","prezime","provera","subscribe","odgovor","ubaciKorisnika","alert","navigate","agencija","naziv","ulica","grad","drzava","maticniBroj","opis","otpremanjeFajla","event","fajl","target","files","citac","FileReader","readAsDataURL","onload","result","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\kosov\\OneDrive\\Dokumenti\\UredjivanjeProstoraAPP\\frontend\\src\\app\\registracija\\registracija.component.html","C:\\Users\\kosov\\OneDrive\\Dokumenti\\UredjivanjeProstoraAPP\\frontend\\src\\app\\registracija\\registracija.component.ts"],"sourcesContent":["Ja sam\n<select [(ngModel)]=\"tip\">\n    <option value=\"klijent\">klijent</option>\n    <option value=\"agencija\">agencija</option>\n</select>\n<table>\n    <tr>\n        <td>Korisnicko ime</td>\n        <td><input type=\"text\" [(ngModel)]=\"korisnickoIme\"></td>\n    </tr>\n    <tr>\n        <td>Lozinka</td>\n        <td><input type=\"password\" [(ngModel)]=\"lozinka\"></td>\n    </tr>\n    <tr>\n        <td>Potvrda lozinke</td>\n        <td><input type=\"password\" [(ngModel)]=\"potvrdaLozinke\"></td>\n    </tr>\n    <tr>\n        <td>Kontakt telefon</td>\n        <td><input type=\"text\" [(ngModel)]=\"telefon\"></td>\n    </tr>\n    <tr>\n        <td>Mejl</td>\n        <td><input type=\"text\" [(ngModel)]=\"mejl\"></td>\n    </tr>\n    <tr *ngIf=\"tip=='klijent'\">\n        <td>Ime</td>\n        <td><input type=\"text\" [(ngModel)]=\"ime\"></td>\n    </tr>\n    <tr *ngIf=\"tip=='klijent'\">\n        <td>Prezime</td>\n        <td><input type=\"text\" [(ngModel)]=\"prezime\"></td>\n    </tr>\n    <tr *ngIf=\"tip=='agencija'\">\n        <td>Naziv agencije</td>\n        <td><input type=\"text\" [(ngModel)]=\"naziv\"></td>\n    </tr>\n    <tr *ngIf=\"tip=='agencija'\">\n        <td>Ulica i broj</td>\n        <td><input type=\"text\" [(ngModel)]=\"ulica\"></td>\n    </tr>\n    <tr *ngIf=\"tip=='agencija'\">\n        <td>Grad</td>\n        <td><input type=\"text\" [(ngModel)]=\"grad\"></td>\n    </tr>\n    <tr *ngIf=\"tip=='agencija'\">\n        <td>Drzava</td>\n        <td><input type=\"text\" [(ngModel)]=\"drzava\"></td>\n    </tr>\n    <tr *ngIf=\"tip=='agencija'\">\n        <td>Maticni broj agencije</td>\n        <td><input type=\"text\" [(ngModel)]=\"maticniBroj\"></td>\n    </tr>\n    <tr *ngIf=\"tip=='agencija'\">\n        <td>Kratak opis agencije</td>\n        <td><textarea [(ngModel)]=\"opis\"></textarea></td>\n    </tr>\n    <tr>\n        <td>Profilna slika</td>\n        <td><input type=\"file\" (change)=\"otpremanjeFajla($event)\"></td>\n    </tr>\n    <tr>\n        <td colspan=\"2\"><button (click)=\"registracija()\">Registruj se</button></td>\n    </tr>\n</table>\n{{greska}}\n","import { Component, OnInit } from '@angular/core';\r\nimport { KorisnikService } from '../services/korisnik.service';\r\nimport { KlijentService } from '../services/klijent.service';\r\nimport { AgencijaService } from '../services/agencija.service';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-registracija',\r\n  templateUrl: './registracija.component.html',\r\n  styleUrls: ['./registracija.component.css'],\r\n})\r\nexport class RegistracijaComponent implements OnInit {\r\n  constructor(\r\n    private korisnikServis: KorisnikService,\r\n    private klijentServis: KlijentService,\r\n    private agencijaKlijent: AgencijaService,\r\n    private ruter: Router\r\n  ) {}\r\n\r\n  ngOnInit(): void {}\r\n\r\n  async registracija() {\r\n    if (this.lozinka != this.potvrdaLozinke) {\r\n      this.greska = 'Lozinke se ne poklapaju';\r\n    }\r\n    if (this.tip == 'klijent') {\r\n      const klijent = {\r\n        korisnickoIme: this.korisnickoIme,\r\n        lozinka: this.lozinka,\r\n        telefon: this.telefon,\r\n        mejl: this.mejl,\r\n        slika: this.slika,\r\n        status: 'na cekanju',\r\n        ime: this.ime,\r\n        prezime: this.prezime,\r\n      };\r\n\r\n      let provera = await this.klijentServis.provera(klijent);\r\n      if (provera != 'ok') {\r\n        this.greska = provera;\r\n        return;\r\n      }\r\n\r\n      this.klijentServis.registracija(klijent).subscribe((odgovor) => {\r\n        if (odgovor['poruka'] == 'ok') {\r\n          this.greska = '';\r\n        } else {\r\n          this.greska = odgovor['poruka'];\r\n          return;\r\n        }\r\n      });\r\n\r\n      this.korisnikServis\r\n        .ubaciKorisnika(this.korisnickoIme, this.lozinka, this.tip)\r\n        .subscribe((odgovor) => {\r\n          if (odgovor['poruka'] == 'ok') {\r\n            alert('Uspesno ste se registrovali\\nAdmini ce vas uskoro odobriti');\r\n            this.ruter.navigate(['/prijava']);\r\n          } else {\r\n            this.greska = odgovor['poruka'];\r\n          }\r\n        });\r\n    } else if (this.tip == 'agencija') {\r\n      const agencija = {\r\n        korisnickoIme: this.korisnickoIme,\r\n        lozinka: this.lozinka,\r\n        telefon: this.telefon,\r\n        mejl: this.mejl,\r\n        slika: this.slika,\r\n        status: 'na cekanju',\r\n        naziv: this.naziv,\r\n        ulica: this.ulica,\r\n        grad: this.grad,\r\n        drzava: this.drzava,\r\n        maticniBroj: this.maticniBroj,\r\n        opis: this.opis,\r\n      };\r\n\r\n      let provera = await this.agencijaKlijent.provera(agencija);\r\n      if (provera != 'ok') {\r\n        this.greska = provera;\r\n        return;\r\n      }\r\n\r\n      this.agencijaKlijent.registracija(agencija).subscribe((odgovor) => {\r\n        if (odgovor['poruka'] == 'ok') {\r\n          this.greska = '';\r\n        } else {\r\n          this.greska = odgovor['poruka'];\r\n          return;\r\n        }\r\n      });\r\n\r\n      this.korisnikServis\r\n        .ubaciKorisnika(this.korisnickoIme, this.lozinka, this.tip)\r\n        .subscribe((odgovor) => {\r\n          if (odgovor['poruka'] == 'ok') {\r\n            alert('Uspesno ste se registrovali\\nAdmini ce vas uskoro odobriti');\r\n            this.ruter.navigate(['/prijava']);\r\n          } else {\r\n            this.greska = odgovor['poruka'];\r\n          }\r\n        });\r\n    } else {\r\n      this.greska = 'Morate izabrati tip korisnika';\r\n    }\r\n  }\r\n\r\n  otpremanjeFajla(event) {\r\n    var fajl = event.target.files[0];\r\n    var citac = new FileReader();\r\n    citac.readAsDataURL(fajl);\r\n    citac.onload = () => {\r\n      this.slika = citac.result as string;\r\n    };\r\n  }\r\n\r\n  tip: string = '';\r\n  korisnickoIme: string = '';\r\n  lozinka: string = '';\r\n  potvrdaLozinke: string = '';\r\n  telefon: string = '';\r\n  mejl: string = '';\r\n  slika: string = ''; //TODO: proveriti da li je dobra dimenzija\r\n\r\n  ime: string = '';\r\n  prezime: string = '';\r\n\r\n  naziv: string = '';\r\n  ulica: string = '';\r\n  grad: string = '';\r\n  drzava: string = '';\r\n  maticniBroj: string = '';\r\n  opis: string = '';\r\n\r\n  greska: string = '';\r\n}\r\n"]},"metadata":{},"sourceType":"module"}