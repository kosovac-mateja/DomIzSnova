{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/kosov/OneDrive/Dokumenti/UredjivanjeProstoraAPP/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/provera.service\";\nimport * as i2 from \"../services/korisnik.service\";\nimport * as i3 from \"../services/klijent.service\";\nimport * as i4 from \"../services/agencija.service\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/forms\";\nimport * as i8 from \"../zaglavlje-admin/zaglavlje-admin.component\";\n\nfunction RegistracijaAdminComponent_div_35_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 4)(2, \"label\", 25);\n    i0.ɵɵtext(3, \"Ime\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"input\", 26);\n    i0.ɵɵlistener(\"ngModelChange\", function RegistracijaAdminComponent_div_35_Template_input_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.ime = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"div\", 4)(6, \"label\", 27);\n    i0.ɵɵtext(7, \"Prezime\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"input\", 28);\n    i0.ɵɵlistener(\"ngModelChange\", function RegistracijaAdminComponent_div_35_Template_input_ngModelChange_8_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.prezime = $event);\n    });\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.ime);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.prezime);\n  }\n}\n\nfunction RegistracijaAdminComponent_div_36_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 4)(2, \"label\", 29);\n    i0.ɵɵtext(3, \"Naziv agencije\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"input\", 30);\n    i0.ɵɵlistener(\"ngModelChange\", function RegistracijaAdminComponent_div_36_Template_input_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.naziv = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"div\", 4)(6, \"label\", 31);\n    i0.ɵɵtext(7, \"Ulica i broj\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"input\", 32);\n    i0.ɵɵlistener(\"ngModelChange\", function RegistracijaAdminComponent_div_36_Template_input_ngModelChange_8_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.ulica = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\", 4)(10, \"label\", 33);\n    i0.ɵɵtext(11, \"Grad\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"input\", 34);\n    i0.ɵɵlistener(\"ngModelChange\", function RegistracijaAdminComponent_div_36_Template_input_ngModelChange_12_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.grad = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"div\", 4)(14, \"label\", 35);\n    i0.ɵɵtext(15, \"Dr\\u017Eava\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"input\", 36);\n    i0.ɵɵlistener(\"ngModelChange\", function RegistracijaAdminComponent_div_36_Template_input_ngModelChange_16_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.drzava = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"div\", 4)(18, \"label\", 37);\n    i0.ɵɵtext(19, \"Mati\\u010Dni broj agencije\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"input\", 38);\n    i0.ɵɵlistener(\"ngModelChange\", function RegistracijaAdminComponent_div_36_Template_input_ngModelChange_20_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.maticniBroj = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(21, \"div\", 4)(22, \"label\", 39);\n    i0.ɵɵtext(23, \"Kratak opis agencije\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"textarea\", 40);\n    i0.ɵɵlistener(\"ngModelChange\", function RegistracijaAdminComponent_div_36_Template_textarea_ngModelChange_24_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.opis = $event);\n    });\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.naziv);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.ulica);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.grad);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.drzava);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.maticniBroj);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.opis);\n  }\n}\n\nexport class RegistracijaAdminComponent {\n  constructor(proveraServis, korisnikServis, klijentServis, agencijaServis, ruter) {\n    this.proveraServis = proveraServis;\n    this.korisnikServis = korisnikServis;\n    this.klijentServis = klijentServis;\n    this.agencijaServis = agencijaServis;\n    this.ruter = ruter;\n    this.tip = 'klijent';\n    this.korisnickoIme = '';\n    this.lozinka = '';\n    this.potvrdaLozinke = '';\n    this.telefon = '';\n    this.mejl = '';\n    this.slika = '';\n    this.fajl = null;\n    this.ime = '';\n    this.prezime = '';\n    this.naziv = '';\n    this.ulica = '';\n    this.grad = '';\n    this.drzava = '';\n    this.maticniBroj = '';\n    this.opis = '';\n    this.greska = '';\n    this.slikaIzabrana = true;\n  }\n\n  ngOnInit() {}\n\n  registracija() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      if (_this.lozinka != _this.potvrdaLozinke) {\n        _this.greska = 'Lozinke se ne poklapaju';\n        return;\n      }\n\n      if (_this.slikaIzabrana == false) {\n        return;\n      }\n\n      if (_this.tip == 'klijent') {\n        const klijent = {\n          korisnickoIme: _this.korisnickoIme,\n          lozinka: _this.lozinka,\n          telefon: _this.telefon,\n          mejl: _this.mejl,\n          slika: _this.slika,\n          status: 'na cekanju',\n          ime: _this.ime,\n          prezime: _this.prezime\n        };\n        let provera = yield _this.proveraServis.proveraKlijent(klijent);\n\n        if (provera != 'ok') {\n          _this.greska = provera;\n          return;\n        }\n\n        _this.klijentServis.registracija(klijent).subscribe(odgovor => {\n          if (odgovor['poruka'] == 'ok') {\n            _this.greska = '';\n          } else {\n            _this.greska = odgovor['poruka'];\n            return;\n          }\n        });\n\n        _this.korisnikServis.ubaciKorisnika(_this.korisnickoIme, _this.lozinka, _this.tip).subscribe(odgovor => {\n          if (odgovor['poruka'] == 'ok') {\n            alert('Uspesno ste dodali novog klijenta');\n\n            _this.ruter.navigate(['/admin.korisnici']);\n          } else {\n            _this.greska = odgovor['poruka'];\n          }\n        });\n      } else if (_this.tip == 'agencija') {\n        const agencija = {\n          korisnickoIme: _this.korisnickoIme,\n          lozinka: _this.lozinka,\n          telefon: _this.telefon,\n          mejl: _this.mejl,\n          slika: _this.slika,\n          status: 'na cekanju',\n          naziv: _this.naziv,\n          ulica: _this.ulica,\n          grad: _this.grad,\n          drzava: _this.drzava,\n          maticniBroj: _this.maticniBroj,\n          opis: _this.opis\n        };\n        let provera = yield _this.proveraServis.proveraAgencija(agencija);\n\n        if (provera != 'ok') {\n          _this.greska = provera;\n          return;\n        }\n\n        _this.agencijaServis.registracija(agencija).subscribe(odgovor => {\n          if (odgovor['poruka'] == 'ok') {\n            _this.greska = '';\n          } else {\n            _this.greska = odgovor['poruka'];\n            return;\n          }\n        });\n\n        _this.korisnikServis.ubaciKorisnika(_this.korisnickoIme, _this.lozinka, _this.tip).subscribe(odgovor => {\n          if (odgovor['poruka'] == 'ok') {\n            alert('Uspesno ste dodali novu agenciju');\n\n            _this.ruter.navigate(['/admin.korisnici']);\n          } else {\n            _this.greska = odgovor['poruka'];\n          }\n        });\n      } else {\n        _this.greska = 'Morate izabrati tip korisnika';\n      }\n    })();\n  }\n\n  otpremanjeSlike(fajl) {\n    if (fajl.target.files[0]) {\n      if (fajl.target.files[0].type == 'image/jpeg' || fajl.target.files[0].type == 'image/png') {\n        const citac = new FileReader();\n\n        citac.onload = e => {\n          const slika = new Image();\n          slika.src = e.target.result;\n\n          slika.onload = res => {\n            const visina = res.currentTarget['height'];\n            const sirina = res.currentTarget['width'];\n\n            if (visina == sirina) {\n              if (visina > 300 || visina < 100) {\n                this.greska = 'Slika mora biti dimenzija izmedju 100x100px i 300x300px';\n                this.slikaIzabrana = false;\n              } else {\n                this.greska = '';\n                this.slika = e.target.result;\n                this.slikaIzabrana = true;\n              }\n            } else {\n              this.greska = 'Slika mora biti kvadratnog oblika';\n              this.slikaIzabrana = false;\n            }\n          };\n        };\n\n        citac.readAsDataURL(fajl.target.files[0]);\n      } else {\n        this.greska = 'Slika mora biti u PNG/JPG formatu';\n        this.slikaIzabrana = false;\n      }\n    }\n  }\n\n}\n\nRegistracijaAdminComponent.ɵfac = function RegistracijaAdminComponent_Factory(t) {\n  return new (t || RegistracijaAdminComponent)(i0.ɵɵdirectiveInject(i1.ProveraService), i0.ɵɵdirectiveInject(i2.KorisnikService), i0.ɵɵdirectiveInject(i3.KlijentService), i0.ɵɵdirectiveInject(i4.AgencijaService), i0.ɵɵdirectiveInject(i5.Router));\n};\n\nRegistracijaAdminComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: RegistracijaAdminComponent,\n  selectors: [[\"app-registracija-admin\"]],\n  decls: 46,\n  vars: 9,\n  consts: [[1, \"container\"], [1, \"row\"], [1, \"col-lg-6\", \"offset-lg-3\"], [1, \"text-center\"], [1, \"form-group\"], [\"for\", \"tip\"], [\"id\", \"tip\", \"name\", \"tip\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"value\", \"klijent\"], [\"value\", \"agencija\"], [\"for\", \"korisnickoIme\"], [\"type\", \"text\", \"id\", \"korisnickoIme\", \"name\", \"korisnickoIme\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"lozinka\"], [\"type\", \"password\", \"id\", \"lozinka\", \"name\", \"lozinka\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"potvrdaLozinke\"], [\"type\", \"password\", \"id\", \"potvrdaLozinke\", \"name\", \"potvrdaLozinke\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"telefon\"], [\"type\", \"text\", \"id\", \"telefon\", \"name\", \"telefon\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"mejl\"], [\"type\", \"text\", \"id\", \"mejl\", \"name\", \"mejl\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [4, \"ngIf\"], [\"for\", \"profilnaSlika\"], [\"type\", \"file\", \"id\", \"profilnaSlika\", \"name\", \"profilnaSlika\", 1, \"form-control-file\", 3, \"change\"], [1, \"form-group\", \"text-center\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"text-danger\"], [\"for\", \"ime\"], [\"type\", \"text\", \"id\", \"ime\", \"name\", \"ime\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"prezime\"], [\"type\", \"text\", \"id\", \"prezime\", \"name\", \"prezime\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"naziv\"], [\"type\", \"text\", \"id\", \"naziv\", \"name\", \"naziv\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"ulica\"], [\"type\", \"text\", \"id\", \"ulica\", \"name\", \"ulica\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"grad\"], [\"type\", \"text\", \"id\", \"grad\", \"name\", \"grad\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"drzava\"], [\"type\", \"text\", \"id\", \"drzava\", \"name\", \"drzava\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"maticniBroj\"], [\"type\", \"text\", \"id\", \"maticniBroj\", \"name\", \"maticniBroj\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"opis\"], [\"id\", \"opis\", \"rows\", \"3\", \"name\", \"opis\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"]],\n  template: function RegistracijaAdminComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"app-zaglavlje-admin\");\n      i0.ɵɵelementStart(1, \"div\", 0)(2, \"div\", 1)(3, \"div\", 2)(4, \"h1\", 3);\n      i0.ɵɵtext(5, \"Dodaj novog korisnika\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"form\")(7, \"div\", 4)(8, \"label\", 5);\n      i0.ɵɵtext(9, \"Dodaj\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"select\", 6);\n      i0.ɵɵlistener(\"ngModelChange\", function RegistracijaAdminComponent_Template_select_ngModelChange_10_listener($event) {\n        return ctx.tip = $event;\n      });\n      i0.ɵɵelementStart(11, \"option\", 7);\n      i0.ɵɵtext(12, \"klijenta\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"option\", 8);\n      i0.ɵɵtext(14, \"agenciju\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(15, \"div\", 4)(16, \"label\", 9);\n      i0.ɵɵtext(17, \"Korisni\\u010Dko ime\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"input\", 10);\n      i0.ɵɵlistener(\"ngModelChange\", function RegistracijaAdminComponent_Template_input_ngModelChange_18_listener($event) {\n        return ctx.korisnickoIme = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(19, \"div\", 4)(20, \"label\", 11);\n      i0.ɵɵtext(21, \"Lozinka\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(22, \"input\", 12);\n      i0.ɵɵlistener(\"ngModelChange\", function RegistracijaAdminComponent_Template_input_ngModelChange_22_listener($event) {\n        return ctx.lozinka = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(23, \"div\", 4)(24, \"label\", 13);\n      i0.ɵɵtext(25, \"Potvrda lozinke\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(26, \"input\", 14);\n      i0.ɵɵlistener(\"ngModelChange\", function RegistracijaAdminComponent_Template_input_ngModelChange_26_listener($event) {\n        return ctx.potvrdaLozinke = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(27, \"div\", 4)(28, \"label\", 15);\n      i0.ɵɵtext(29, \"Kontakt telefon\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(30, \"input\", 16);\n      i0.ɵɵlistener(\"ngModelChange\", function RegistracijaAdminComponent_Template_input_ngModelChange_30_listener($event) {\n        return ctx.telefon = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(31, \"div\", 4)(32, \"label\", 17);\n      i0.ɵɵtext(33, \"Mejl\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(34, \"input\", 18);\n      i0.ɵɵlistener(\"ngModelChange\", function RegistracijaAdminComponent_Template_input_ngModelChange_34_listener($event) {\n        return ctx.mejl = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(35, RegistracijaAdminComponent_div_35_Template, 9, 2, \"div\", 19);\n      i0.ɵɵtemplate(36, RegistracijaAdminComponent_div_36_Template, 25, 6, \"div\", 19);\n      i0.ɵɵelementStart(37, \"div\", 4)(38, \"label\", 20);\n      i0.ɵɵtext(39, \"Profilna slika\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(40, \"input\", 21);\n      i0.ɵɵlistener(\"change\", function RegistracijaAdminComponent_Template_input_change_40_listener($event) {\n        return ctx.otpremanjeSlike($event);\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(41, \"div\", 22)(42, \"button\", 23);\n      i0.ɵɵlistener(\"click\", function RegistracijaAdminComponent_Template_button_click_42_listener() {\n        return ctx.registracija();\n      });\n      i0.ɵɵtext(43, \"Dodaj korisnika\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(44, \"div\", 24);\n      i0.ɵɵtext(45);\n      i0.ɵɵelementEnd()()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"ngModel\", ctx.tip);\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngModel\", ctx.korisnickoIme);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.lozinka);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.potvrdaLozinke);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.telefon);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.mejl);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.tip == \"klijent\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.tip == \"agencija\");\n      i0.ɵɵadvance(9);\n      i0.ɵɵtextInterpolate(ctx.greska);\n    }\n  },\n  dependencies: [i6.NgIf, i7.ɵNgNoValidate, i7.NgSelectOption, i7.ɵNgSelectMultipleOption, i7.DefaultValueAccessor, i7.SelectControlValueAccessor, i7.NgControlStatus, i7.NgControlStatusGroup, i7.NgModel, i7.NgForm, i8.ZaglavljeAdminComponent],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJyZWdpc3RyYWNpamEtYWRtaW4uY29tcG9uZW50LmNzcyJ9 */\"]\n});","map":{"version":3,"mappings":";;;;;;;;;;;;;;;IAiCUA,4BAA4B,CAA5B,EAA4B,KAA5B,EAA4B,CAA5B,EAA4B,CAA5B,EAA4B,OAA5B,EAA4B,EAA5B;IAEqBA;IAAGA;IACpBA;IAAiDA;MAAAA;MAAA;MAAA;IAAA;IAAjDA;IAEFA,+BAAwB,CAAxB,EAAwB,OAAxB,EAAwB,EAAxB;IACuBA;IAAOA;IAC5BA;IAAqDA;MAAAA;MAAA;MAAA;IAAA;IAArDA;;;;;IAJiDA;IAAAA;IAIIA;IAAAA;;;;;;;;IAGzDA,4BAA6B,CAA7B,EAA6B,KAA7B,EAA6B,CAA7B,EAA6B,CAA7B,EAA6B,OAA7B,EAA6B,EAA7B;IAEuBA;IAAcA;IACjCA;IAAmDA;MAAAA;MAAA;MAAA;IAAA;IAAnDA;IAEFA,+BAAwB,CAAxB,EAAwB,OAAxB,EAAwB,EAAxB;IACqBA;IAAYA;IAC/BA;IAAmDA;MAAAA;MAAA;MAAA;IAAA;IAAnDA;IAEFA,+BAAwB,EAAxB,EAAwB,OAAxB,EAAwB,EAAxB;IACoBA;IAAIA;IACtBA;IAAkDA;MAAAA;MAAA;MAAA;IAAA;IAAlDA;IAEFA,gCAAwB,EAAxB,EAAwB,OAAxB,EAAwB,EAAxB;IACsBA;IAAMA;IAC1BA;IAAoDA;MAAAA;MAAA;MAAA;IAAA;IAApDA;IAEFA,gCAAwB,EAAxB,EAAwB,OAAxB,EAAwB,EAAxB;IAC2BA;IAAqBA;IAC9CA;IAAyDA;MAAAA;MAAA;MAAA;IAAA;IAAzDA;IAEFA,gCAAwB,EAAxB,EAAwB,OAAxB,EAAwB,EAAxB;IACoBA;IAAoBA;IACtCA;IAAkDA;MAAAA;MAAA;MAAA;IAAA;IAA+BA;;;;;IApB9BA;IAAAA;IAIAA;IAAAA;IAIDA;IAAAA;IAIEA;IAAAA;IAIKA;IAAAA;IAIPA;IAAAA;;;;ACtDhE,OAAM,MAAOC,0BAAP,CAAiC;EACrCC,YACUC,aADV,EAEUC,cAFV,EAGUC,aAHV,EAIUC,cAJV,EAKUC,KALV,EAKuB;IAJb;IACA;IACA;IACA;IACA;IAwIV,WAAc,SAAd;IACA,qBAAwB,EAAxB;IACA,eAAkB,EAAlB;IACA,sBAAyB,EAAzB;IACA,eAAkB,EAAlB;IACA,YAAe,EAAf;IACA,aAAgB,EAAhB;IACA,YAAa,IAAb;IAEA,WAAc,EAAd;IACA,eAAkB,EAAlB;IAEA,aAAgB,EAAhB;IACA,aAAgB,EAAhB;IACA,YAAe,EAAf;IACA,cAAiB,EAAjB;IACA,mBAAsB,EAAtB;IACA,YAAe,EAAf;IAEA,cAAiB,EAAjB;IACA,qBAAyB,IAAzB;EA3JI;;EAEJC,QAAQ,IAAW;;EAEbC,YAAY;IAAA;;IAAA;MAChB,IAAI,KAAI,CAACC,OAAL,IAAgB,KAAI,CAACC,cAAzB,EAAyC;QACvC,KAAI,CAACC,MAAL,GAAc,yBAAd;QACA;MACD;;MAED,IAAI,KAAI,CAACC,aAAL,IAAsB,KAA1B,EAAiC;QAC/B;MACD;;MAED,IAAI,KAAI,CAACC,GAAL,IAAY,SAAhB,EAA2B;QACzB,MAAMC,OAAO,GAAG;UACdC,aAAa,EAAE,KAAI,CAACA,aADN;UAEdN,OAAO,EAAE,KAAI,CAACA,OAFA;UAGdO,OAAO,EAAE,KAAI,CAACA,OAHA;UAIdC,IAAI,EAAE,KAAI,CAACA,IAJG;UAKdC,KAAK,EAAE,KAAI,CAACA,KALE;UAMdC,MAAM,EAAE,YANM;UAOdC,GAAG,EAAE,KAAI,CAACA,GAPI;UAQdC,OAAO,EAAE,KAAI,CAACA;QARA,CAAhB;QAWA,IAAIC,OAAO,SAAS,KAAI,CAACpB,aAAL,CAAmBqB,cAAnB,CAAkCT,OAAlC,CAApB;;QACA,IAAIQ,OAAO,IAAI,IAAf,EAAqB;UACnB,KAAI,CAACX,MAAL,GAAcW,OAAd;UACA;QACD;;QAED,KAAI,CAAClB,aAAL,CAAmBI,YAAnB,CAAgCM,OAAhC,EAAyCU,SAAzC,CAAoDC,OAAD,IAAY;UAC7D,IAAIA,OAAO,CAAC,QAAD,CAAP,IAAqB,IAAzB,EAA+B;YAC7B,KAAI,CAACd,MAAL,GAAc,EAAd;UACD,CAFD,MAEO;YACL,KAAI,CAACA,MAAL,GAAcc,OAAO,CAAC,QAAD,CAArB;YACA;UACD;QACF,CAPD;;QASA,KAAI,CAACtB,cAAL,CACGuB,cADH,CACkB,KAAI,CAACX,aADvB,EACsC,KAAI,CAACN,OAD3C,EACoD,KAAI,CAACI,GADzD,EAEGW,SAFH,CAEcC,OAAD,IAAY;UACrB,IAAIA,OAAO,CAAC,QAAD,CAAP,IAAqB,IAAzB,EAA+B;YAC7BE,KAAK,CAAC,mCAAD,CAAL;;YACA,KAAI,CAACrB,KAAL,CAAWsB,QAAX,CAAoB,CAAC,kBAAD,CAApB;UACD,CAHD,MAGO;YACL,KAAI,CAACjB,MAAL,GAAcc,OAAO,CAAC,QAAD,CAArB;UACD;QACF,CATH;MAUD,CArCD,MAqCO,IAAI,KAAI,CAACZ,GAAL,IAAY,UAAhB,EAA4B;QACjC,MAAMgB,QAAQ,GAAG;UACfd,aAAa,EAAE,KAAI,CAACA,aADL;UAEfN,OAAO,EAAE,KAAI,CAACA,OAFC;UAGfO,OAAO,EAAE,KAAI,CAACA,OAHC;UAIfC,IAAI,EAAE,KAAI,CAACA,IAJI;UAKfC,KAAK,EAAE,KAAI,CAACA,KALG;UAMfC,MAAM,EAAE,YANO;UAOfW,KAAK,EAAE,KAAI,CAACA,KAPG;UAQfC,KAAK,EAAE,KAAI,CAACA,KARG;UASfC,IAAI,EAAE,KAAI,CAACA,IATI;UAUfC,MAAM,EAAE,KAAI,CAACA,MAVE;UAWfC,WAAW,EAAE,KAAI,CAACA,WAXH;UAYfC,IAAI,EAAE,KAAI,CAACA;QAZI,CAAjB;QAeA,IAAIb,OAAO,SAAS,KAAI,CAACpB,aAAL,CAAmBkC,eAAnB,CAAmCP,QAAnC,CAApB;;QACA,IAAIP,OAAO,IAAI,IAAf,EAAqB;UACnB,KAAI,CAACX,MAAL,GAAcW,OAAd;UACA;QACD;;QAED,KAAI,CAACjB,cAAL,CAAoBG,YAApB,CAAiCqB,QAAjC,EAA2CL,SAA3C,CAAsDC,OAAD,IAAY;UAC/D,IAAIA,OAAO,CAAC,QAAD,CAAP,IAAqB,IAAzB,EAA+B;YAC7B,KAAI,CAACd,MAAL,GAAc,EAAd;UACD,CAFD,MAEO;YACL,KAAI,CAACA,MAAL,GAAcc,OAAO,CAAC,QAAD,CAArB;YACA;UACD;QACF,CAPD;;QASA,KAAI,CAACtB,cAAL,CACGuB,cADH,CACkB,KAAI,CAACX,aADvB,EACsC,KAAI,CAACN,OAD3C,EACoD,KAAI,CAACI,GADzD,EAEGW,SAFH,CAEcC,OAAD,IAAY;UACrB,IAAIA,OAAO,CAAC,QAAD,CAAP,IAAqB,IAAzB,EAA+B;YAC7BE,KAAK,CAAC,kCAAD,CAAL;;YACA,KAAI,CAACrB,KAAL,CAAWsB,QAAX,CAAoB,CAAC,kBAAD,CAApB;UACD,CAHD,MAGO;YACL,KAAI,CAACjB,MAAL,GAAcc,OAAO,CAAC,QAAD,CAArB;UACD;QACF,CATH;MAUD,CAzCM,MAyCA;QACL,KAAI,CAACd,MAAL,GAAc,+BAAd;MACD;IA1Fe;EA2FjB;;EAED0B,eAAe,CAACC,IAAD,EAAK;IAClB,IAAIA,IAAI,CAACC,MAAL,CAAYC,KAAZ,CAAkB,CAAlB,CAAJ,EAA0B;MACxB,IACEF,IAAI,CAACC,MAAL,CAAYC,KAAZ,CAAkB,CAAlB,EAAqBC,IAArB,IAA6B,YAA7B,IACAH,IAAI,CAACC,MAAL,CAAYC,KAAZ,CAAkB,CAAlB,EAAqBC,IAArB,IAA6B,WAF/B,EAGE;QACA,MAAMC,KAAK,GAAG,IAAIC,UAAJ,EAAd;;QACAD,KAAK,CAACE,MAAN,GAAgBC,CAAD,IAAW;UACxB,MAAM3B,KAAK,GAAG,IAAI4B,KAAJ,EAAd;UACA5B,KAAK,CAAC6B,GAAN,GAAYF,CAAC,CAACN,MAAF,CAASS,MAArB;;UACA9B,KAAK,CAAC0B,MAAN,GAAgBK,GAAD,IAAQ;YACrB,MAAMC,MAAM,GAAGD,GAAG,CAACE,aAAJ,CAAkB,QAAlB,CAAf;YACA,MAAMC,MAAM,GAAGH,GAAG,CAACE,aAAJ,CAAkB,OAAlB,CAAf;;YAEA,IAAID,MAAM,IAAIE,MAAd,EAAsB;cACpB,IAAIF,MAAM,GAAG,GAAT,IAAgBA,MAAM,GAAG,GAA7B,EAAkC;gBAChC,KAAKvC,MAAL,GACE,yDADF;gBAEA,KAAKC,aAAL,GAAqB,KAArB;cACD,CAJD,MAIO;gBACL,KAAKD,MAAL,GAAc,EAAd;gBACA,KAAKO,KAAL,GAAa2B,CAAC,CAACN,MAAF,CAASS,MAAtB;gBACA,KAAKpC,aAAL,GAAqB,IAArB;cACD;YACF,CAVD,MAUO;cACL,KAAKD,MAAL,GAAc,mCAAd;cACA,KAAKC,aAAL,GAAqB,KAArB;YACD;UACF,CAlBD;QAmBD,CAtBD;;QAuBA8B,KAAK,CAACW,aAAN,CAAoBf,IAAI,CAACC,MAAL,CAAYC,KAAZ,CAAkB,CAAlB,CAApB;MACD,CA7BD,MA6BO;QACL,KAAK7B,MAAL,GAAc,mCAAd;QACA,KAAKC,aAAL,GAAqB,KAArB;MACD;IACF;EACF;;AA5IoC;;;mBAA1BZ,4BAA0BD;AAAA;;;QAA1BC;EAA0BsD;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MDZvC3D;MACAA,+BAAuB,CAAvB,EAAuB,KAAvB,EAAuB,CAAvB,EAAuB,CAAvB,EAAuB,KAAvB,EAAuB,CAAvB,EAAuB,CAAvB,EAAuB,IAAvB,EAAuB,CAAvB;MAGgCA;MAAqBA;MAC7CA,6BAAM,CAAN,EAAM,KAAN,EAAM,CAAN,EAAM,CAAN,EAAM,OAAN,EAAM,CAAN;MAEqBA;MAAKA;MACtBA;MAAsCA;QAAA;MAAA;MACpCA;MAAwBA;MAAQA;MAChCA;MAAyBA;MAAQA;MAGrCA,gCAAwB,EAAxB,EAAwB,OAAxB,EAAwB,CAAxB;MAC6BA;MAAcA;MACzCA;MAA2DA;QAAA;MAAA;MAA3DA;MAEFA,gCAAwB,EAAxB,EAAwB,OAAxB,EAAwB,EAAxB;MACuBA;MAAOA;MAC5BA;MAAyDA;QAAA;MAAA;MAAzDA;MAEFA,gCAAwB,EAAxB,EAAwB,OAAxB,EAAwB,EAAxB;MAC8BA;MAAeA;MAC3CA;MAAgEA;QAAA;MAAA;MAAhEA;MAEFA,gCAAwB,EAAxB,EAAwB,OAAxB,EAAwB,EAAxB;MACuBA;MAAeA;MACpCA;MAAqDA;QAAA;MAAA;MAArDA;MAEFA,gCAAwB,EAAxB,EAAwB,OAAxB,EAAwB,EAAxB;MACoBA;MAAIA;MACtBA;MAAkDA;QAAA;MAAA;MAAlDA;MAEFA;MAUAA;MA0BAA,gCAAwB,EAAxB,EAAwB,OAAxB,EAAwB,EAAxB;MAC6BA;MAAcA;MACzCA;MAAgEA;QAAA,OAAU4D,2BAAV;MAAiC,CAAjC;MAAhE5D;MAEFA,iCAAoC,EAApC,EAAoC,QAApC,EAAoC,EAApC;MACkCA;QAAA,OAAS4D,kBAAT;MAAuB,CAAvB;MAAyB5D;MAAeA;MAG5EA;MAAyBA;MAAYA;;;;MArEKA;MAAAA;MAOqBA;MAAAA;MAIFA;MAAAA;MAIOA;MAAAA;MAIXA;MAAAA;MAIHA;MAAAA;MAE9CA;MAAAA;MAUAA;MAAAA;MAkCiBA;MAAAA","names":["i0","RegistracijaAdminComponent","constructor","proveraServis","korisnikServis","klijentServis","agencijaServis","ruter","ngOnInit","registracija","lozinka","potvrdaLozinke","greska","slikaIzabrana","tip","klijent","korisnickoIme","telefon","mejl","slika","status","ime","prezime","provera","proveraKlijent","subscribe","odgovor","ubaciKorisnika","alert","navigate","agencija","naziv","ulica","grad","drzava","maticniBroj","opis","proveraAgencija","otpremanjeSlike","fajl","target","files","type","citac","FileReader","onload","e","Image","src","result","res","visina","currentTarget","sirina","readAsDataURL","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\kosov\\OneDrive\\Dokumenti\\UredjivanjeProstoraAPP\\frontend\\src\\app\\registracija-admin\\registracija-admin.component.html","C:\\Users\\kosov\\OneDrive\\Dokumenti\\UredjivanjeProstoraAPP\\frontend\\src\\app\\registracija-admin\\registracija-admin.component.ts"],"sourcesContent":["<app-zaglavlje-admin></app-zaglavlje-admin>\n<div class=\"container\">\n    <div class=\"row\">\n      <div class=\"col-lg-6 offset-lg-3\">\n        <h1 class=\"text-center\">Dodaj novog korisnika</h1>\n        <form>\n          <div class=\"form-group\">\n            <label for=\"tip\">Dodaj</label>\n            <select class=\"form-control\" id=\"tip\" [(ngModel)]=\"tip\" name=\"tip\">\n              <option value=\"klijent\">klijenta</option>\n              <option value=\"agencija\">agenciju</option>\n            </select>\n          </div>\n          <div class=\"form-group\">\n            <label for=\"korisnickoIme\">Korisničko ime</label>\n            <input type=\"text\" class=\"form-control\" id=\"korisnickoIme\" [(ngModel)]=\"korisnickoIme\" name=\"korisnickoIme\">\n          </div>\n          <div class=\"form-group\">\n            <label for=\"lozinka\">Lozinka</label>\n            <input type=\"password\" class=\"form-control\" id=\"lozinka\" [(ngModel)]=\"lozinka\" name=\"lozinka\">\n          </div>\n          <div class=\"form-group\">\n            <label for=\"potvrdaLozinke\">Potvrda lozinke</label>\n            <input type=\"password\" class=\"form-control\" id=\"potvrdaLozinke\" [(ngModel)]=\"potvrdaLozinke\" name=\"potvrdaLozinke\">\n          </div>\n          <div class=\"form-group\">\n            <label for=\"telefon\">Kontakt telefon</label>\n            <input type=\"text\" class=\"form-control\" id=\"telefon\" [(ngModel)]=\"telefon\" name=\"telefon\">\n          </div>\n          <div class=\"form-group\">\n            <label for=\"mejl\">Mejl</label>\n            <input type=\"text\" class=\"form-control\" id=\"mejl\" [(ngModel)]=\"mejl\" name=\"mejl\">\n          </div>\n          <div *ngIf=\"tip=='klijent'\">\n            <div class=\"form-group\">\n              <label for=\"ime\">Ime</label>\n              <input type=\"text\" class=\"form-control\" id=\"ime\" [(ngModel)]=\"ime\" name=\"ime\">\n            </div>\n            <div class=\"form-group\">\n              <label for=\"prezime\">Prezime</label>\n              <input type=\"text\" class=\"form-control\" id=\"prezime\" [(ngModel)]=\"prezime\" name=\"prezime\">\n            </div>\n          </div>\n          <div *ngIf=\"tip=='agencija'\">\n            <div class=\"form-group\">\n              <label for=\"naziv\">Naziv agencije</label>\n              <input type=\"text\" class=\"form-control\" id=\"naziv\" [(ngModel)]=\"naziv\" name=\"naziv\">\n            </div>\n            <div class=\"form-group\">\n              <label for=\"ulica\">Ulica i broj</label>\n              <input type=\"text\" class=\"form-control\" id=\"ulica\" [(ngModel)]=\"ulica\" name=\"ulica\">\n            </div>\n            <div class=\"form-group\">\n              <label for=\"grad\">Grad</label>\n              <input type=\"text\" class=\"form-control\" id=\"grad\" [(ngModel)]=\"grad\" name=\"grad\">\n            </div>\n            <div class=\"form-group\">\n              <label for=\"drzava\">Država</label>\n              <input type=\"text\" class=\"form-control\" id=\"drzava\" [(ngModel)]=\"drzava\" name=\"drzava\">\n            </div>\n            <div class=\"form-group\">\n              <label for=\"maticniBroj\">Matični broj agencije</label>\n              <input type=\"text\" class=\"form-control\" id=\"maticniBroj\" [(ngModel)]=\"maticniBroj\" name=\"maticniBroj\">\n            </div>\n            <div class=\"form-group\">\n              <label for=\"opis\">Kratak opis agencije</label>\n              <textarea class=\"form-control\" id=\"opis\" rows=\"3\" [(ngModel)]=\"opis\" name=\"opis\"></textarea>\n            </div>\n          </div>\n          <div class=\"form-group\">\n            <label for=\"profilnaSlika\">Profilna slika</label>\n            <input type=\"file\" class=\"form-control-file\" id=\"profilnaSlika\" (change)=\"otpremanjeSlike($event)\" name=\"profilnaSlika\">\n          </div>\n          <div class=\"form-group text-center\">\n            <button class=\"btn btn-primary\" (click)=\"registracija()\">Dodaj korisnika</button>\n          </div>\n        </form>\n        <div class=\"text-danger\">{{ greska }}</div>\n      </div>\n    </div>\n  </div>\n  ","import { Component, OnInit } from '@angular/core';\nimport { ProveraService } from '../services/provera.service';\nimport { KorisnikService } from '../services/korisnik.service';\nimport { KlijentService } from '../services/klijent.service';\nimport { AgencijaService } from '../services/agencija.service';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-registracija-admin',\n  templateUrl: './registracija-admin.component.html',\n  styleUrls: ['./registracija-admin.component.css'],\n})\nexport class RegistracijaAdminComponent implements OnInit {\n  constructor(\n    private proveraServis: ProveraService,\n    private korisnikServis: KorisnikService,\n    private klijentServis: KlijentService,\n    private agencijaServis: AgencijaService,\n    private ruter: Router\n  ) {}\n\n  ngOnInit(): void {}\n\n  async registracija() {\n    if (this.lozinka != this.potvrdaLozinke) {\n      this.greska = 'Lozinke se ne poklapaju';\n      return;\n    }\n\n    if (this.slikaIzabrana == false) {\n      return;\n    }\n\n    if (this.tip == 'klijent') {\n      const klijent = {\n        korisnickoIme: this.korisnickoIme,\n        lozinka: this.lozinka,\n        telefon: this.telefon,\n        mejl: this.mejl,\n        slika: this.slika,\n        status: 'na cekanju',\n        ime: this.ime,\n        prezime: this.prezime,\n      };\n\n      let provera = await this.proveraServis.proveraKlijent(klijent);\n      if (provera != 'ok') {\n        this.greska = provera;\n        return;\n      }\n\n      this.klijentServis.registracija(klijent).subscribe((odgovor) => {\n        if (odgovor['poruka'] == 'ok') {\n          this.greska = '';\n        } else {\n          this.greska = odgovor['poruka'];\n          return;\n        }\n      });\n\n      this.korisnikServis\n        .ubaciKorisnika(this.korisnickoIme, this.lozinka, this.tip)\n        .subscribe((odgovor) => {\n          if (odgovor['poruka'] == 'ok') {\n            alert('Uspesno ste dodali novog klijenta');\n            this.ruter.navigate(['/admin.korisnici']);\n          } else {\n            this.greska = odgovor['poruka'];\n          }\n        });\n    } else if (this.tip == 'agencija') {\n      const agencija = {\n        korisnickoIme: this.korisnickoIme,\n        lozinka: this.lozinka,\n        telefon: this.telefon,\n        mejl: this.mejl,\n        slika: this.slika,\n        status: 'na cekanju',\n        naziv: this.naziv,\n        ulica: this.ulica,\n        grad: this.grad,\n        drzava: this.drzava,\n        maticniBroj: this.maticniBroj,\n        opis: this.opis,\n      };\n\n      let provera = await this.proveraServis.proveraAgencija(agencija);\n      if (provera != 'ok') {\n        this.greska = provera;\n        return;\n      }\n\n      this.agencijaServis.registracija(agencija).subscribe((odgovor) => {\n        if (odgovor['poruka'] == 'ok') {\n          this.greska = '';\n        } else {\n          this.greska = odgovor['poruka'];\n          return;\n        }\n      });\n\n      this.korisnikServis\n        .ubaciKorisnika(this.korisnickoIme, this.lozinka, this.tip)\n        .subscribe((odgovor) => {\n          if (odgovor['poruka'] == 'ok') {\n            alert('Uspesno ste dodali novu agenciju');\n            this.ruter.navigate(['/admin.korisnici']);\n          } else {\n            this.greska = odgovor['poruka'];\n          }\n        });\n    } else {\n      this.greska = 'Morate izabrati tip korisnika';\n    }\n  }\n\n  otpremanjeSlike(fajl) {\n    if (fajl.target.files[0]) {\n      if (\n        fajl.target.files[0].type == 'image/jpeg' ||\n        fajl.target.files[0].type == 'image/png'\n      ) {\n        const citac = new FileReader();\n        citac.onload = (e: any) => {\n          const slika = new Image();\n          slika.src = e.target.result;\n          slika.onload = (res) => {\n            const visina = res.currentTarget['height'];\n            const sirina = res.currentTarget['width'];\n\n            if (visina == sirina) {\n              if (visina > 300 || visina < 100) {\n                this.greska =\n                  'Slika mora biti dimenzija izmedju 100x100px i 300x300px';\n                this.slikaIzabrana = false;\n              } else {\n                this.greska = '';\n                this.slika = e.target.result;\n                this.slikaIzabrana = true;\n              }\n            } else {\n              this.greska = 'Slika mora biti kvadratnog oblika';\n              this.slikaIzabrana = false;\n            }\n          };\n        };\n        citac.readAsDataURL(fajl.target.files[0]);\n      } else {\n        this.greska = 'Slika mora biti u PNG/JPG formatu';\n        this.slikaIzabrana = false;\n      }\n    }\n  }\n\n  tip: string = 'klijent';\n  korisnickoIme: string = '';\n  lozinka: string = '';\n  potvrdaLozinke: string = '';\n  telefon: string = '';\n  mejl: string = '';\n  slika: string = '';\n  fajl: File = null;\n\n  ime: string = '';\n  prezime: string = '';\n\n  naziv: string = '';\n  ulica: string = '';\n  grad: string = '';\n  drzava: string = '';\n  maticniBroj: string = '';\n  opis: string = '';\n\n  greska: string = '';\n  slikaIzabrana: boolean = true;\n}\n"]},"metadata":{},"sourceType":"module"}