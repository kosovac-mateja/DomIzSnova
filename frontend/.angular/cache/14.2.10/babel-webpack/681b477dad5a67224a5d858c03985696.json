{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/kosov/OneDrive/Dokumenti/UredjivanjeProstoraAPP/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/klijent.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../services/provera.service\";\nimport * as i4 from \"@angular/forms\";\n\nconst _c0 = function () {\n  return [\"/klijent/profil\"];\n};\n\nconst _c1 = function () {\n  return [\"/klijent/objekat\"];\n};\n\nconst _c2 = function () {\n  return [\"/klijent/agencije\"];\n};\n\nconst _c3 = function () {\n  return [\"/klijent/poslovi\"];\n};\n\nexport class ProfilKlijentComponent {\n  constructor(klijentServis, ruter, proveraServis) {\n    this.klijentServis = klijentServis;\n    this.ruter = ruter;\n    this.proveraServis = proveraServis;\n    this.greska = '';\n  }\n\n  ngOnInit() {\n    this.korisnickoIme = sessionStorage.getItem('korisnik');\n    this.klijentServis.dohvatiKlijenta(this.korisnickoIme).subscribe(klijent => {\n      this.ime = klijent.ime;\n      this.prezime = klijent.prezime;\n      this.mejl = klijent.mejl;\n      this.telefon = klijent.telefon;\n      this.slika = klijent.slika;\n    });\n  }\n\n  otpremanjeFajla(event) {\n    var fajl = event.target.files[0];\n    var citac = new FileReader();\n    citac.readAsDataURL(fajl);\n\n    citac.onload = () => {\n      this.slika = citac.result;\n    };\n  }\n\n  azuriraj() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const klijent = {\n        korisnickoIme: _this.korisnickoIme,\n        lozinka: '',\n        telefon: _this.telefon,\n        mejl: _this.mejl,\n        slika: _this.slika,\n        ime: _this.ime,\n        prezime: _this.prezime\n      };\n      let provera = yield _this.proveraServis.proveraKlijent(klijent, true);\n\n      if (provera != 'ok') {\n        _this.greska = provera;\n        return;\n      }\n\n      _this.klijentServis.azurirajKlijenta(_this.korisnickoIme, _this.telefon, _this.mejl, _this.slika, _this.ime, _this.prezime).subscribe(res => {\n        if (res['poruka'] == 'ok') {\n          alert('Uspešno ste ažurirali profil.');\n        } else {\n          alert('Greška pri ažuriranju profila.');\n        }\n\n        _this.ruter.navigate(['/klijent']);\n      });\n    })();\n  }\n\n  odustani() {\n    this.ruter.navigate(['/klijent']);\n  }\n\n}\n\nProfilKlijentComponent.ɵfac = function ProfilKlijentComponent_Factory(t) {\n  return new (t || ProfilKlijentComponent)(i0.ɵɵdirectiveInject(i1.KlijentService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.ProveraService));\n};\n\nProfilKlijentComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProfilKlijentComponent,\n  selectors: [[\"app-profil-klijent\"]],\n  decls: 47,\n  vars: 14,\n  consts: [[3, \"routerLink\"], [\"type\", \"text\", \"disabled\", \"true\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"file\", 3, \"change\"], [3, \"click\"]],\n  template: function ProfilKlijentComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"a\", 0);\n      i0.ɵɵtext(1, \"Profil\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"a\", 0);\n      i0.ɵɵtext(3, \"Objekat\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"a\", 0);\n      i0.ɵɵtext(5, \"Agencije\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"a\", 0);\n      i0.ɵɵtext(7, \"Poslovi\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"table\")(9, \"tr\")(10, \"td\");\n      i0.ɵɵtext(11, \"Korisnicko ime\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"td\")(13, \"input\", 1);\n      i0.ɵɵlistener(\"ngModelChange\", function ProfilKlijentComponent_Template_input_ngModelChange_13_listener($event) {\n        return ctx.korisnickoIme = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(14, \"tr\")(15, \"td\");\n      i0.ɵɵtext(16, \"Ime\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"td\")(18, \"input\", 2);\n      i0.ɵɵlistener(\"ngModelChange\", function ProfilKlijentComponent_Template_input_ngModelChange_18_listener($event) {\n        return ctx.ime = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(19, \"tr\")(20, \"td\");\n      i0.ɵɵtext(21, \"Prezime\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(22, \"td\")(23, \"input\", 2);\n      i0.ɵɵlistener(\"ngModelChange\", function ProfilKlijentComponent_Template_input_ngModelChange_23_listener($event) {\n        return ctx.prezime = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(24, \"tr\")(25, \"td\");\n      i0.ɵɵtext(26, \"Kontakt telefon\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(27, \"td\")(28, \"input\", 2);\n      i0.ɵɵlistener(\"ngModelChange\", function ProfilKlijentComponent_Template_input_ngModelChange_28_listener($event) {\n        return ctx.telefon = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(29, \"tr\")(30, \"td\");\n      i0.ɵɵtext(31, \"Mejl\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(32, \"td\")(33, \"input\", 2);\n      i0.ɵɵlistener(\"ngModelChange\", function ProfilKlijentComponent_Template_input_ngModelChange_33_listener($event) {\n        return ctx.mejl = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(34, \"tr\")(35, \"td\");\n      i0.ɵɵtext(36, \"Profilna slika\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(37, \"td\")(38, \"input\", 3);\n      i0.ɵɵlistener(\"change\", function ProfilKlijentComponent_Template_input_change_38_listener($event) {\n        return ctx.otpremanjeFajla($event);\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(39, \"tr\")(40, \"td\")(41, \"button\", 4);\n      i0.ɵɵlistener(\"click\", function ProfilKlijentComponent_Template_button_click_41_listener() {\n        return ctx.azuriraj();\n      });\n      i0.ɵɵtext(42, \"Azuriraj\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(43, \"td\")(44, \"button\", 4);\n      i0.ɵɵlistener(\"click\", function ProfilKlijentComponent_Template_button_click_44_listener() {\n        return ctx.odustani();\n      });\n      i0.ɵɵtext(45, \"Odustani\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵtext(46);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(10, _c0));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(11, _c1));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(12, _c2));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(13, _c3));\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngModel\", ctx.korisnickoIme);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.ime);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.prezime);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.telefon);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.mejl);\n      i0.ɵɵadvance(13);\n      i0.ɵɵtextInterpolate1(\"\\n\", ctx.greska, \"\\n\");\n    }\n  },\n  dependencies: [i2.RouterLinkWithHref, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJwcm9maWwta2xpamVudC5jb21wb25lbnQuY3NzIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["ProfilKlijentComponent","constructor","klijentServis","ruter","proveraServis","ngOnInit","korisnickoIme","sessionStorage","getItem","dohvatiKlijenta","subscribe","klijent","ime","prezime","mejl","telefon","slika","otpremanjeFajla","event","fajl","target","files","citac","FileReader","readAsDataURL","onload","result","azuriraj","lozinka","provera","proveraKlijent","greska","azurirajKlijenta","res","alert","navigate","odustani","i0","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\kosov\\OneDrive\\Dokumenti\\UredjivanjeProstoraAPP\\frontend\\src\\app\\profil-klijent\\profil-klijent.component.ts","C:\\Users\\kosov\\OneDrive\\Dokumenti\\UredjivanjeProstoraAPP\\frontend\\src\\app\\profil-klijent\\profil-klijent.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { KorisnikService } from '../services/korisnik.service';\nimport { KlijentService } from '../services/klijent.service';\nimport { Korisnik } from '../models/korisnik';\nimport { Klijent } from '../models/klijent';\nimport { Router } from '@angular/router';\nimport { ProveraService } from '../services/provera.service';\n\n@Component({\n  selector: 'app-profil-klijent',\n  templateUrl: './profil-klijent.component.html',\n  styleUrls: ['./profil-klijent.component.css'],\n})\nexport class ProfilKlijentComponent implements OnInit {\n  constructor(\n    private klijentServis: KlijentService,\n    private ruter: Router,\n    private proveraServis: ProveraService\n  ) {}\n\n  ngOnInit(): void {\n    this.korisnickoIme = sessionStorage.getItem('korisnik');\n    this.klijentServis\n      .dohvatiKlijenta(this.korisnickoIme)\n      .subscribe((klijent: Klijent) => {\n        this.ime = klijent.ime;\n        this.prezime = klijent.prezime;\n        this.mejl = klijent.mejl;\n        this.telefon = klijent.telefon;\n        this.slika = klijent.slika;\n      });\n  }\n\n  otpremanjeFajla(event) {\n    var fajl = event.target.files[0];\n    var citac = new FileReader();\n    citac.readAsDataURL(fajl);\n    citac.onload = () => {\n      this.slika = citac.result as string;\n    };\n  }\n\n  async azuriraj() {\n    const klijent = {\n      korisnickoIme: this.korisnickoIme,\n      lozinka: '',\n      telefon: this.telefon,\n      mejl: this.mejl,\n      slika: this.slika,\n      ime: this.ime,\n      prezime: this.prezime,\n    };\n\n    let provera = await this.proveraServis.proveraKlijent(klijent, true);\n    if (provera != 'ok') {\n      this.greska = provera;\n      return;\n    }\n\n    this.klijentServis\n      .azurirajKlijenta(\n        this.korisnickoIme,\n        this.telefon,\n        this.mejl,\n        this.slika,\n        this.ime,\n        this.prezime\n      )\n      .subscribe((res) => {\n        if (res['poruka'] == 'ok') {\n          alert('Uspešno ste ažurirali profil.');\n        } else {\n          alert('Greška pri ažuriranju profila.');\n        }\n        this.ruter.navigate(['/klijent']);\n      });\n  }\n\n  odustani() {\n    this.ruter.navigate(['/klijent']);\n  }\n\n  korisnickoIme: string;\n  ime: string;\n  prezime: string;\n  mejl: string;\n  telefon: string;\n  slika: string;\n\n  greska: string = '';\n}\n","<a [routerLink]=\"['/klijent/profil']\">Profil</a> \n<a [routerLink]=\"['/klijent/objekat']\">Objekat</a> \n<a [routerLink]=\"['/klijent/agencije']\">Agencije</a> \n<a [routerLink]=\"['/klijent/poslovi']\">Poslovi</a> \n<table>\n    <tr>\n        <td>Korisnicko ime</td>\n        <td><input type=\"text\" [(ngModel)]=\"korisnickoIme\" disabled=\"true\"></td>\n    </tr>\n    <tr>\n        <td>Ime</td>\n        <td><input type=\"text\" [(ngModel)]=\"ime\"></td>\n    </tr>\n    <tr>\n        <td>Prezime</td>\n        <td><input type=\"text\" [(ngModel)]=\"prezime\"></td>\n    </tr>\n    <tr>\n        <td>Kontakt telefon</td>\n        <td><input type=\"text\" [(ngModel)]=\"telefon\"></td>\n    </tr>\n    <tr>\n        <td>Mejl</td>\n        <td><input type=\"text\" [(ngModel)]=\"mejl\"></td>\n    </tr>\n    <tr>\n        <td>Profilna slika</td>\n        <td><input type=\"file\" (change)=\"otpremanjeFajla($event)\"></td>\n    </tr>\n    <tr>\n        <td><button (click)=\"azuriraj()\">Azuriraj</button></td>\n        <td><button (click)=\"odustani()\">Odustani</button></td>\n    </tr>\n</table>\n{{greska}}\n"]},"metadata":{},"sourceType":"module"}