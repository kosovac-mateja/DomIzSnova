{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/kosov/OneDrive/Dokumenti/UredjivanjeProstoraAPP/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/agencija.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../services/provera.service\";\nimport * as i4 from \"@angular/forms\";\nexport class ProfilAgencijaComponent {\n  constructor(agencijaServis, ruter, proveraServis) {\n    this.agencijaServis = agencijaServis;\n    this.ruter = ruter;\n    this.proveraServis = proveraServis;\n    this.greska = '';\n  }\n\n  ngOnInit() {\n    this.korisnickoIme = sessionStorage.getItem('korisnik');\n    this.agencijaServis.dohvatiAgenciju(this.korisnickoIme).subscribe(agencija => {\n      this.naziv = agencija.naziv;\n      this.opis = agencija.opis;\n      this.mejl = agencija.mejl;\n      this.telefon = agencija.telefon;\n      this.slika = agencija.slika;\n      this.ulica = agencija.ulica;\n      this.grad = agencija.grad;\n      this.drzava = agencija.drzava;\n      this.maticniBroj = agencija.maticniBroj;\n    });\n  }\n\n  otpremanjeFajla(event) {\n    var fajl = event.target.files[0];\n    var citac = new FileReader();\n    citac.readAsDataURL(fajl);\n\n    citac.onload = () => {\n      this.slika = citac.result;\n    };\n  }\n\n  azuriraj() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const agencija = {\n        korisnickoIme: _this.korisnickoIme,\n        lozinka: '',\n        telefon: _this.telefon,\n        mejl: _this.mejl,\n        slika: _this.slika,\n        naziv: _this.naziv,\n        ulica: _this.ulica,\n        grad: _this.grad,\n        drzava: _this.drzava,\n        maticniBroj: _this.maticniBroj,\n        opis: _this.opis\n      };\n      let provera = yield _this.proveraServis.proveraAgencija(agencija, true);\n\n      if (provera != 'ok') {\n        _this.greska = provera;\n        return;\n      }\n\n      _this.agencijaServis.azurirajAgenciju(_this.korisnickoIme, _this.telefon, _this.mejl, _this.slika, _this.naziv, _this.ulica, _this.grad, _this.drzava, _this.maticniBroj, _this.opis).subscribe(res => {\n        if (res['poruka'] == 'ok') {\n          alert('Uspešno ste ažurirali profil.');\n        } else {\n          alert('Greška pri ažuriranju profila.');\n        }\n\n        _this.ruter.navigate(['/agencija']);\n      });\n    })();\n  }\n\n  odustani() {\n    this.ruter.navigate(['agencija']);\n  }\n\n}\n\nProfilAgencijaComponent.ɵfac = function ProfilAgencijaComponent_Factory(t) {\n  return new (t || ProfilAgencijaComponent)(i0.ɵɵdirectiveInject(i1.AgencijaService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.ProveraService));\n};\n\nProfilAgencijaComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProfilAgencijaComponent,\n  selectors: [[\"app-profil-agencija\"]],\n  decls: 54,\n  vars: 9,\n  consts: [[\"type\", \"text\", \"disabled\", \"true\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"file\", 3, \"change\"], [3, \"click\"]],\n  template: function ProfilAgencijaComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"table\")(1, \"tr\")(2, \"td\");\n      i0.ɵɵtext(3, \"Korisnicko ime\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"td\")(5, \"input\", 0);\n      i0.ɵɵlistener(\"ngModelChange\", function ProfilAgencijaComponent_Template_input_ngModelChange_5_listener($event) {\n        return ctx.korisnickoIme = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(6, \"tr\")(7, \"td\");\n      i0.ɵɵtext(8, \"Naziv\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"td\")(10, \"input\", 1);\n      i0.ɵɵlistener(\"ngModelChange\", function ProfilAgencijaComponent_Template_input_ngModelChange_10_listener($event) {\n        return ctx.naziv = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(11, \"tr\")(12, \"td\");\n      i0.ɵɵtext(13, \"Opis\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"td\")(15, \"input\", 1);\n      i0.ɵɵlistener(\"ngModelChange\", function ProfilAgencijaComponent_Template_input_ngModelChange_15_listener($event) {\n        return ctx.opis = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(16, \"tr\")(17, \"td\");\n      i0.ɵɵtext(18, \"Ulica\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"td\")(20, \"input\", 1);\n      i0.ɵɵlistener(\"ngModelChange\", function ProfilAgencijaComponent_Template_input_ngModelChange_20_listener($event) {\n        return ctx.ulica = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(21, \"tr\")(22, \"td\");\n      i0.ɵɵtext(23, \"Grad\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(24, \"td\")(25, \"input\", 1);\n      i0.ɵɵlistener(\"ngModelChange\", function ProfilAgencijaComponent_Template_input_ngModelChange_25_listener($event) {\n        return ctx.grad = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(26, \"tr\")(27, \"td\");\n      i0.ɵɵtext(28, \"Drzava\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(29, \"td\")(30, \"input\", 1);\n      i0.ɵɵlistener(\"ngModelChange\", function ProfilAgencijaComponent_Template_input_ngModelChange_30_listener($event) {\n        return ctx.drzava = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(31, \"tr\")(32, \"td\");\n      i0.ɵɵtext(33, \"Kontakt telefon\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(34, \"td\")(35, \"input\", 1);\n      i0.ɵɵlistener(\"ngModelChange\", function ProfilAgencijaComponent_Template_input_ngModelChange_35_listener($event) {\n        return ctx.telefon = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(36, \"tr\")(37, \"td\");\n      i0.ɵɵtext(38, \"Mejl\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(39, \"td\")(40, \"input\", 1);\n      i0.ɵɵlistener(\"ngModelChange\", function ProfilAgencijaComponent_Template_input_ngModelChange_40_listener($event) {\n        return ctx.mejl = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(41, \"tr\")(42, \"td\");\n      i0.ɵɵtext(43, \"Profilna slika\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(44, \"td\")(45, \"input\", 2);\n      i0.ɵɵlistener(\"change\", function ProfilAgencijaComponent_Template_input_change_45_listener($event) {\n        return ctx.otpremanjeFajla($event);\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(46, \"tr\")(47, \"td\")(48, \"button\", 3);\n      i0.ɵɵlistener(\"click\", function ProfilAgencijaComponent_Template_button_click_48_listener() {\n        return ctx.azuriraj();\n      });\n      i0.ɵɵtext(49, \"Azuriraj\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(50, \"td\")(51, \"button\", 3);\n      i0.ɵɵlistener(\"click\", function ProfilAgencijaComponent_Template_button_click_51_listener() {\n        return ctx.odustani();\n      });\n      i0.ɵɵtext(52, \"Odustani\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵtext(53);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.korisnickoIme);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.naziv);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.opis);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.ulica);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.grad);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.drzava);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.telefon);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.mejl);\n      i0.ɵɵadvance(13);\n      i0.ɵɵtextInterpolate1(\"\\n\", ctx.greska, \"\\n```\\n\");\n    }\n  },\n  dependencies: [i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJwcm9maWwtYWdlbmNpamEuY29tcG9uZW50LmNzcyJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["ProfilAgencijaComponent","constructor","agencijaServis","ruter","proveraServis","ngOnInit","korisnickoIme","sessionStorage","getItem","dohvatiAgenciju","subscribe","agencija","naziv","opis","mejl","telefon","slika","ulica","grad","drzava","maticniBroj","otpremanjeFajla","event","fajl","target","files","citac","FileReader","readAsDataURL","onload","result","azuriraj","lozinka","provera","proveraAgencija","greska","azurirajAgenciju","res","alert","navigate","odustani","i0","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\kosov\\OneDrive\\Dokumenti\\UredjivanjeProstoraAPP\\frontend\\src\\app\\profil-agencija\\profil-agencija.component.ts","C:\\Users\\kosov\\OneDrive\\Dokumenti\\UredjivanjeProstoraAPP\\frontend\\src\\app\\profil-agencija\\profil-agencija.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { AgencijaService } from '../services/agencija.service';\nimport { Router } from '@angular/router';\nimport { Agencija } from '../models/agencija';\nimport { ProveraService } from '../services/provera.service';\n\n@Component({\n  selector: 'app-profil-agencija',\n  templateUrl: './profil-agencija.component.html',\n  styleUrls: ['./profil-agencija.component.css'],\n})\nexport class ProfilAgencijaComponent implements OnInit {\n  constructor(\n    private agencijaServis: AgencijaService,\n    private ruter: Router,\n    private proveraServis: ProveraService\n  ) {}\n\n  ngOnInit(): void {\n    this.korisnickoIme = sessionStorage.getItem('korisnik');\n    this.agencijaServis\n      .dohvatiAgenciju(this.korisnickoIme)\n      .subscribe((agencija: Agencija) => {\n        this.naziv = agencija.naziv;\n        this.opis = agencija.opis;\n        this.mejl = agencija.mejl;\n        this.telefon = agencija.telefon;\n        this.slika = agencija.slika;\n        this.ulica = agencija.ulica;\n        this.grad = agencija.grad;\n        this.drzava = agencija.drzava;\n        this.maticniBroj = agencija.maticniBroj;\n      });\n  }\n\n  otpremanjeFajla(event) {\n    var fajl = event.target.files[0];\n    var citac = new FileReader();\n    citac.readAsDataURL(fajl);\n    citac.onload = () => {\n      this.slika = citac.result as string;\n    };\n  }\n\n  async azuriraj() {\n    const agencija = {\n      korisnickoIme: this.korisnickoIme,\n      lozinka: '',\n      telefon: this.telefon,\n      mejl: this.mejl,\n      slika: this.slika,\n      naziv: this.naziv,\n      ulica: this.ulica,\n      grad: this.grad,\n      drzava: this.drzava,\n      maticniBroj: this.maticniBroj,\n      opis: this.opis,\n    };\n\n    let provera = await this.proveraServis.proveraAgencija(agencija, true);\n    if (provera != 'ok') {\n      this.greska = provera;\n      return;\n    }\n\n    this.agencijaServis\n      .azurirajAgenciju(\n        this.korisnickoIme,\n        this.telefon,\n        this.mejl,\n        this.slika,\n        this.naziv,\n        this.ulica,\n        this.grad,\n        this.drzava,\n        this.maticniBroj,\n        this.opis\n      )\n      .subscribe((res) => {\n        if (res['poruka'] == 'ok') {\n          alert('Uspešno ste ažurirali profil.');\n        } else {\n          alert('Greška pri ažuriranju profila.');\n        }\n        this.ruter.navigate(['/agencija']);\n      });\n  }\n\n  odustani() {\n    this.ruter.navigate(['agencija']);\n  }\n\n  korisnickoIme: string;\n  naziv: string;\n  opis: string;\n  mejl: string;\n  telefon: string;\n  slika: string;\n  ulica: string;\n  grad: string;\n  drzava: string;\n  maticniBroj: string;\n\n  greska: string = '';\n}\n","<table>\n    <tr>\n        <td>Korisnicko ime</td>\n        <td><input type=\"text\" [(ngModel)]=\"korisnickoIme\" disabled=\"true\"></td>\n    </tr>\n    <tr>\n        <td>Naziv</td>\n        <td><input type=\"text\" [(ngModel)]=\"naziv\"></td>\n    </tr>\n    <tr>\n        <td>Opis</td>\n        <td><input type=\"text\" [(ngModel)]=\"opis\"></td>\n    </tr>\n    <tr>\n        <td>Ulica</td>\n        <td><input type=\"text\" [(ngModel)]=\"ulica\"></td>\n    </tr>\n    <tr>\n        <td>Grad</td>\n        <td><input type=\"text\" [(ngModel)]=\"grad\"></td>\n    </tr>\n    <tr>\n        <td>Drzava</td>\n        <td><input type=\"text\" [(ngModel)]=\"drzava\"></td>\n    </tr>\n    <tr>\n        <td>Kontakt telefon</td>\n        <td><input type=\"text\" [(ngModel)]=\"telefon\"></td>\n    </tr>\n    <tr>\n        <td>Mejl</td>\n        <td><input type=\"text\" [(ngModel)]=\"mejl\"></td>\n    </tr>\n    <tr>\n        <td>Profilna slika</td>\n        <td><input type=\"file\" (change)=\"otpremanjeFajla($event)\"></td>\n    </tr>\n    <tr>\n        <td><button (click)=\"azuriraj()\">Azuriraj</button></td>\n        <td><button (click)=\"odustani()\">Odustani</button></td>\n    </tr>\n</table>\n{{greska}}\n```\n"]},"metadata":{},"sourceType":"module"}