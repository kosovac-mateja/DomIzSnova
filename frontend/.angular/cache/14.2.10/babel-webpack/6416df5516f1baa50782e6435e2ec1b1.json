{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/kosov/OneDrive/Dokumenti/UredjivanjeProstoraAPP/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/klijent.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../services/provera.service\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"../zaglavlje-klijent/zaglavlje-klijent.component\";\n\nconst _c0 = function () {\n  return [\"/promena-lozinke\"];\n};\n\nexport class ProfilKlijentComponent {\n  constructor(klijentServis, ruter, proveraServis) {\n    this.klijentServis = klijentServis;\n    this.ruter = ruter;\n    this.proveraServis = proveraServis;\n    this.greska = '';\n  }\n\n  ngOnInit() {\n    this.korisnickoIme = sessionStorage.getItem('korisnik');\n    this.klijentServis.dohvatiKlijenta(this.korisnickoIme).subscribe(klijent => {\n      this.ime = klijent.ime;\n      this.prezime = klijent.prezime;\n      this.mejl = klijent.mejl;\n      this.telefon = klijent.telefon;\n      this.slika = klijent.slika;\n    });\n  }\n\n  otpremanjeFajla(event) {\n    var fajl = event.target.files[0];\n    var citac = new FileReader();\n    citac.readAsDataURL(fajl);\n\n    citac.onload = () => {\n      this.slika = citac.result;\n    };\n  }\n\n  azuriraj() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const klijent = {\n        korisnickoIme: _this.korisnickoIme,\n        lozinka: '',\n        telefon: _this.telefon,\n        mejl: _this.mejl,\n        slika: _this.slika,\n        ime: _this.ime,\n        prezime: _this.prezime\n      };\n      let provera = yield _this.proveraServis.proveraKlijent(klijent, true);\n\n      if (provera != 'ok') {\n        _this.greska = provera;\n        return;\n      }\n\n      _this.klijentServis.azurirajKlijenta(_this.korisnickoIme, _this.telefon, _this.mejl, _this.slika, _this.ime, _this.prezime).subscribe(res => {\n        if (res['poruka'] == 'ok') {\n          alert('Uspešno ste ažurirali profil.');\n        } else {\n          alert('Greška pri ažuriranju profila.');\n        }\n\n        _this.ruter.navigate(['/klijent']);\n      });\n    })();\n  }\n\n  odustani() {\n    this.ruter.navigate(['/klijent']);\n  }\n\n  odjava() {\n    sessionStorage.clear();\n    this.ruter.navigate(['/']);\n  }\n\n}\n\nProfilKlijentComponent.ɵfac = function ProfilKlijentComponent_Factory(t) {\n  return new (t || ProfilKlijentComponent)(i0.ɵɵdirectiveInject(i1.KlijentService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.ProveraService));\n};\n\nProfilKlijentComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProfilKlijentComponent,\n  selectors: [[\"app-profil-klijent\"]],\n  decls: 48,\n  vars: 8,\n  consts: [[1, \"container\"], [1, \"row\"], [1, \"col-md-6\"], [1, \"table\"], [\"type\", \"text\", \"disabled\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"file\", 1, \"form-control-file\", 3, \"change\"], [1, \"btn\", \"btn-primary\", 3, \"routerLink\"], [1, \"btn\", \"btn-success\", 3, \"click\"], [1, \"btn\", \"btn-secondary\", 3, \"click\"]],\n  template: function ProfilKlijentComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"app-zaglavlje-klijent\");\n      i0.ɵɵelementStart(1, \"div\", 0)(2, \"div\", 1)(3, \"div\", 2)(4, \"table\", 3)(5, \"tr\")(6, \"td\");\n      i0.ɵɵtext(7, \"Korisni\\u010Dko ime\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"td\")(9, \"input\", 4);\n      i0.ɵɵlistener(\"ngModelChange\", function ProfilKlijentComponent_Template_input_ngModelChange_9_listener($event) {\n        return ctx.korisnickoIme = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(10, \"tr\")(11, \"td\");\n      i0.ɵɵtext(12, \"Ime\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"td\")(14, \"input\", 5);\n      i0.ɵɵlistener(\"ngModelChange\", function ProfilKlijentComponent_Template_input_ngModelChange_14_listener($event) {\n        return ctx.ime = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(15, \"tr\")(16, \"td\");\n      i0.ɵɵtext(17, \"Prezime\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"td\")(19, \"input\", 5);\n      i0.ɵɵlistener(\"ngModelChange\", function ProfilKlijentComponent_Template_input_ngModelChange_19_listener($event) {\n        return ctx.prezime = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(20, \"tr\")(21, \"td\");\n      i0.ɵɵtext(22, \"Kontakt telefon\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(23, \"td\")(24, \"input\", 5);\n      i0.ɵɵlistener(\"ngModelChange\", function ProfilKlijentComponent_Template_input_ngModelChange_24_listener($event) {\n        return ctx.telefon = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(25, \"tr\")(26, \"td\");\n      i0.ɵɵtext(27, \"Mejl\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(28, \"td\")(29, \"input\", 5);\n      i0.ɵɵlistener(\"ngModelChange\", function ProfilKlijentComponent_Template_input_ngModelChange_29_listener($event) {\n        return ctx.mejl = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(30, \"tr\")(31, \"td\");\n      i0.ɵɵtext(32, \"Profilna slika\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(33, \"td\")(34, \"input\", 6);\n      i0.ɵɵlistener(\"change\", function ProfilKlijentComponent_Template_input_change_34_listener($event) {\n        return ctx.otpremanjeFajla($event);\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(35, \"tr\")(36, \"td\")(37, \"a\", 7);\n      i0.ɵɵtext(38, \"Promeni lozinku\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(39, \"tr\")(40, \"td\")(41, \"button\", 8);\n      i0.ɵɵlistener(\"click\", function ProfilKlijentComponent_Template_button_click_41_listener() {\n        return ctx.azuriraj();\n      });\n      i0.ɵɵtext(42, \"A\\u017Euriraj\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(43, \"td\")(44, \"button\", 9);\n      i0.ɵɵlistener(\"click\", function ProfilKlijentComponent_Template_button_click_44_listener() {\n        return ctx.odustani();\n      });\n      i0.ɵɵtext(45, \"Odustani\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(46, \"p\");\n      i0.ɵɵtext(47);\n      i0.ɵɵelementEnd()()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngModel\", ctx.korisnickoIme);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.ime);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.prezime);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.telefon);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.mejl);\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(7, _c0));\n      i0.ɵɵadvance(10);\n      i0.ɵɵtextInterpolate(ctx.greska);\n    }\n  },\n  dependencies: [i2.RouterLinkWithHref, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel, i5.ZaglavljeKlijentComponent],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJwcm9maWwta2xpamVudC5jb21wb25lbnQuY3NzIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["ProfilKlijentComponent","constructor","klijentServis","ruter","proveraServis","ngOnInit","korisnickoIme","sessionStorage","getItem","dohvatiKlijenta","subscribe","klijent","ime","prezime","mejl","telefon","slika","otpremanjeFajla","event","fajl","target","files","citac","FileReader","readAsDataURL","onload","result","azuriraj","lozinka","provera","proveraKlijent","greska","azurirajKlijenta","res","alert","navigate","odustani","odjava","clear","i0","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\kosov\\OneDrive\\Dokumenti\\UredjivanjeProstoraAPP\\frontend\\src\\app\\profil-klijent\\profil-klijent.component.ts","C:\\Users\\kosov\\OneDrive\\Dokumenti\\UredjivanjeProstoraAPP\\frontend\\src\\app\\profil-klijent\\profil-klijent.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { KorisnikService } from '../services/korisnik.service';\nimport { KlijentService } from '../services/klijent.service';\nimport { Korisnik } from '../models/korisnik';\nimport { Klijent } from '../models/klijent';\nimport { Router } from '@angular/router';\nimport { ProveraService } from '../services/provera.service';\n\n@Component({\n  selector: 'app-profil-klijent',\n  templateUrl: './profil-klijent.component.html',\n  styleUrls: ['./profil-klijent.component.css'],\n})\nexport class ProfilKlijentComponent implements OnInit {\n  constructor(\n    private klijentServis: KlijentService,\n    private ruter: Router,\n    private proveraServis: ProveraService\n  ) {}\n\n  ngOnInit(): void {\n    this.korisnickoIme = sessionStorage.getItem('korisnik');\n    this.klijentServis\n      .dohvatiKlijenta(this.korisnickoIme)\n      .subscribe((klijent: Klijent) => {\n        this.ime = klijent.ime;\n        this.prezime = klijent.prezime;\n        this.mejl = klijent.mejl;\n        this.telefon = klijent.telefon;\n        this.slika = klijent.slika;\n      });\n  }\n\n  otpremanjeFajla(event) {\n    var fajl = event.target.files[0];\n    var citac = new FileReader();\n    citac.readAsDataURL(fajl);\n    citac.onload = () => {\n      this.slika = citac.result as string;\n    };\n  }\n\n  async azuriraj() {\n    const klijent = {\n      korisnickoIme: this.korisnickoIme,\n      lozinka: '',\n      telefon: this.telefon,\n      mejl: this.mejl,\n      slika: this.slika,\n      ime: this.ime,\n      prezime: this.prezime,\n    };\n\n    let provera = await this.proveraServis.proveraKlijent(klijent, true);\n    if (provera != 'ok') {\n      this.greska = provera;\n      return;\n    }\n\n    this.klijentServis\n      .azurirajKlijenta(\n        this.korisnickoIme,\n        this.telefon,\n        this.mejl,\n        this.slika,\n        this.ime,\n        this.prezime\n      )\n      .subscribe((res) => {\n        if (res['poruka'] == 'ok') {\n          alert('Uspešno ste ažurirali profil.');\n        } else {\n          alert('Greška pri ažuriranju profila.');\n        }\n        this.ruter.navigate(['/klijent']);\n      });\n  }\n\n  odustani() {\n    this.ruter.navigate(['/klijent']);\n  }\n\n  odjava() {\n    sessionStorage.clear();\n    this.ruter.navigate(['/']);\n  }\n\n  korisnickoIme: string;\n  ime: string;\n  prezime: string;\n  mejl: string;\n  telefon: string;\n  slika: string;\n\n  greska: string = '';\n}\n","<app-zaglavlje-klijent></app-zaglavlje-klijent>\n<div class=\"container\">\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n        <table class=\"table\">\n          <tr>\n            <td>Korisničko ime</td>\n            <td>\n              <input class=\"form-control\" type=\"text\" [(ngModel)]=\"korisnickoIme\" disabled>\n            </td>\n          </tr>\n          <tr>\n            <td>Ime</td>\n            <td>\n              <input class=\"form-control\" type=\"text\" [(ngModel)]=\"ime\">\n            </td>\n          </tr>\n          <tr>\n            <td>Prezime</td>\n            <td>\n              <input class=\"form-control\" type=\"text\" [(ngModel)]=\"prezime\">\n            </td>\n          </tr>\n          <tr>\n            <td>Kontakt telefon</td>\n            <td>\n              <input class=\"form-control\" type=\"text\" [(ngModel)]=\"telefon\">\n            </td>\n          </tr>\n          <tr>\n            <td>Mejl</td>\n            <td>\n              <input class=\"form-control\" type=\"text\" [(ngModel)]=\"mejl\">\n            </td>\n          </tr>\n          <tr>\n            <td>Profilna slika</td>\n            <td>\n              <input class=\"form-control-file\" type=\"file\" (change)=\"otpremanjeFajla($event)\">\n            </td>\n          </tr>\n          <tr>\n            <td>\n              <a class=\"btn btn-primary\" [routerLink]=\"['/promena-lozinke']\">Promeni lozinku</a>\n            </td>\n          </tr>\n          <tr>\n            <td>\n              <button class=\"btn btn-success\" (click)=\"azuriraj()\">Ažuriraj</button>\n            </td>\n            <td>\n              <button class=\"btn btn-secondary\" (click)=\"odustani()\">Odustani</button>\n            </td>\n          </tr>\n        </table>\n        <p>{{ greska }}</p>\n      </div>\n    </div>\n  </div>\n  \n"]},"metadata":{},"sourceType":"module"}