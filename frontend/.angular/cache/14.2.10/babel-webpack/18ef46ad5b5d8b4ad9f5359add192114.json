{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/kosov/OneDrive/Dokumenti/UredjivanjeProstoraAPP/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/agencija.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../services/provera.service\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"../zaglavlje-agencija/zaglavlje-agencija.component\";\n\nconst _c0 = function () {\n  return [\"/promena-lozinke\"];\n};\n\nexport class ProfilAgencijaComponent {\n  constructor(agencijaServis, ruter, proveraServis) {\n    this.agencijaServis = agencijaServis;\n    this.ruter = ruter;\n    this.proveraServis = proveraServis;\n    this.greska = '';\n  }\n\n  ngOnInit() {\n    this.korisnickoIme = sessionStorage.getItem('korisnik');\n    this.agencijaServis.dohvatiAgenciju(this.korisnickoIme).subscribe(agencija => {\n      this.naziv = agencija.naziv;\n      this.opis = agencija.opis;\n      this.mejl = agencija.mejl;\n      this.telefon = agencija.telefon;\n      this.slika = agencija.slika;\n      this.ulica = agencija.ulica;\n      this.grad = agencija.grad;\n      this.drzava = agencija.drzava;\n      this.maticniBroj = agencija.maticniBroj;\n    });\n  }\n\n  otpremanjeFajla(event) {\n    var fajl = event.target.files[0];\n    var citac = new FileReader();\n    citac.readAsDataURL(fajl);\n\n    citac.onload = () => {\n      this.slika = citac.result;\n    };\n  }\n\n  azuriraj() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const agencija = {\n        korisnickoIme: _this.korisnickoIme,\n        lozinka: '',\n        telefon: _this.telefon,\n        mejl: _this.mejl,\n        slika: _this.slika,\n        naziv: _this.naziv,\n        ulica: _this.ulica,\n        grad: _this.grad,\n        drzava: _this.drzava,\n        maticniBroj: _this.maticniBroj,\n        opis: _this.opis\n      };\n      let provera = yield _this.proveraServis.proveraAgencija(agencija, true);\n\n      if (provera != 'ok') {\n        _this.greska = provera;\n        return;\n      }\n\n      _this.agencijaServis.azurirajAgenciju(_this.korisnickoIme, _this.telefon, _this.mejl, _this.slika, _this.naziv, _this.ulica, _this.grad, _this.drzava, _this.maticniBroj, _this.opis).subscribe(res => {\n        if (res['poruka'] == 'ok') {\n          alert('Uspešno ste ažurirali profil.');\n        } else {\n          alert('Greška pri ažuriranju profila.');\n        }\n\n        _this.ruter.navigate(['/agencija']);\n      });\n    })();\n  }\n\n  odustani() {\n    this.ruter.navigate(['agencija']);\n  }\n\n  odjava() {\n    sessionStorage.clear();\n    this.ruter.navigate(['/']);\n  }\n\n}\n\nProfilAgencijaComponent.ɵfac = function ProfilAgencijaComponent_Factory(t) {\n  return new (t || ProfilAgencijaComponent)(i0.ɵɵdirectiveInject(i1.AgencijaService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.ProveraService));\n};\n\nProfilAgencijaComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProfilAgencijaComponent,\n  selectors: [[\"app-profil-agencija\"]],\n  decls: 62,\n  vars: 11,\n  consts: [[1, \"container\"], [1, \"row\"], [1, \"col-md-6\"], [\"for\", \"korisnickoIme\"], [\"type\", \"text\", \"id\", \"korisnickoIme\", \"disabled\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"naziv\"], [\"type\", \"text\", \"id\", \"naziv\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"opis\"], [\"id\", \"opis\", \"rows\", \"10\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"ulica\"], [\"type\", \"text\", \"id\", \"ulica\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"grad\"], [\"type\", \"text\", \"id\", \"grad\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"drzava\"], [\"type\", \"text\", \"id\", \"drzava\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"telefon\"], [\"type\", \"text\", \"id\", \"telefon\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"mejl\"], [\"type\", \"text\", \"id\", \"mejl\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"profilnaSlika\"], [\"type\", \"file\", \"id\", \"profilnaSlika\", 1, \"form-control-file\", 3, \"change\"], [3, \"routerLink\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"btn\", \"btn-secondary\", 3, \"click\"], [1, \"text-danger\"]],\n  template: function ProfilAgencijaComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"app-zaglavlje-agencija\");\n      i0.ɵɵelementStart(1, \"div\", 0)(2, \"div\", 1)(3, \"div\", 2)(4, \"label\", 3);\n      i0.ɵɵtext(5, \"Korisni\\u010Dko ime\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"input\", 4);\n      i0.ɵɵlistener(\"ngModelChange\", function ProfilAgencijaComponent_Template_input_ngModelChange_6_listener($event) {\n        return ctx.korisnickoIme = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(7, \"div\", 1)(8, \"div\", 2)(9, \"label\", 5);\n      i0.ɵɵtext(10, \"Naziv\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"input\", 6);\n      i0.ɵɵlistener(\"ngModelChange\", function ProfilAgencijaComponent_Template_input_ngModelChange_11_listener($event) {\n        return ctx.naziv = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(12, \"div\", 1)(13, \"div\", 2)(14, \"label\", 7);\n      i0.ɵɵtext(15, \"Opis\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"textarea\", 8);\n      i0.ɵɵlistener(\"ngModelChange\", function ProfilAgencijaComponent_Template_textarea_ngModelChange_16_listener($event) {\n        return ctx.opis = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(17, \"div\", 1)(18, \"div\", 2)(19, \"label\", 9);\n      i0.ɵɵtext(20, \"Ulica\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(21, \"input\", 10);\n      i0.ɵɵlistener(\"ngModelChange\", function ProfilAgencijaComponent_Template_input_ngModelChange_21_listener($event) {\n        return ctx.ulica = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(22, \"div\", 1)(23, \"div\", 2)(24, \"label\", 11);\n      i0.ɵɵtext(25, \"Grad\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(26, \"input\", 12);\n      i0.ɵɵlistener(\"ngModelChange\", function ProfilAgencijaComponent_Template_input_ngModelChange_26_listener($event) {\n        return ctx.grad = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(27, \"div\", 1)(28, \"div\", 2)(29, \"label\", 13);\n      i0.ɵɵtext(30, \"Dr\\u017Eava\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(31, \"input\", 14);\n      i0.ɵɵlistener(\"ngModelChange\", function ProfilAgencijaComponent_Template_input_ngModelChange_31_listener($event) {\n        return ctx.drzava = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(32, \"div\", 1)(33, \"div\", 2)(34, \"label\", 15);\n      i0.ɵɵtext(35, \"Kontakt telefon\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(36, \"input\", 16);\n      i0.ɵɵlistener(\"ngModelChange\", function ProfilAgencijaComponent_Template_input_ngModelChange_36_listener($event) {\n        return ctx.telefon = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(37, \"div\", 1)(38, \"div\", 2)(39, \"label\", 17);\n      i0.ɵɵtext(40, \"Mejl\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(41, \"input\", 18);\n      i0.ɵɵlistener(\"ngModelChange\", function ProfilAgencijaComponent_Template_input_ngModelChange_41_listener($event) {\n        return ctx.mejl = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(42, \"div\", 1)(43, \"div\", 2)(44, \"label\", 19);\n      i0.ɵɵtext(45, \"Profilna slika\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(46, \"input\", 20);\n      i0.ɵɵlistener(\"change\", function ProfilAgencijaComponent_Template_input_change_46_listener($event) {\n        return ctx.otpremanjeFajla($event);\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(47, \"div\", 1)(48, \"div\", 2)(49, \"a\", 21);\n      i0.ɵɵtext(50, \"Promeni lozinku\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(51, \"div\", 1)(52, \"div\", 2)(53, \"button\", 22);\n      i0.ɵɵlistener(\"click\", function ProfilAgencijaComponent_Template_button_click_53_listener() {\n        return ctx.azuriraj();\n      });\n      i0.ɵɵtext(54, \"A\\u017Euriraj\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(55, \"button\", 23);\n      i0.ɵɵlistener(\"click\", function ProfilAgencijaComponent_Template_button_click_55_listener() {\n        return ctx.odustani();\n      });\n      i0.ɵɵtext(56, \"Odustani\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(57, \"div\", 1)(58, \"div\", 2)(59, \"p\", 24);\n      i0.ɵɵtext(60);\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵtext(61, \" ```\\n\");\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngModel\", ctx.korisnickoIme);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.naziv);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.opis);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.ulica);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.grad);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.drzava);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.telefon);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.mejl);\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(10, _c0));\n      i0.ɵɵadvance(11);\n      i0.ɵɵtextInterpolate(ctx.greska);\n    }\n  },\n  dependencies: [i2.RouterLinkWithHref, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel, i5.ZaglavljeAgencijaComponent],\n  styles: [\".container[_ngcontent-%COMP%] {\\r\\n    margin-top: 20px;\\r\\n  }\\r\\n  \\r\\n  .row[_ngcontent-%COMP%] {\\r\\n    margin-bottom: 10px;\\r\\n  }\\r\\n  \\r\\n  .text-danger[_ngcontent-%COMP%] {\\r\\n    color: red;\\r\\n  }\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2ZpbC1hZ2VuY2lqYS5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0VBRUU7SUFDRSxnQkFBZ0I7RUFDbEI7O0VBRUE7SUFDRSxtQkFBbUI7RUFDckI7O0VBRUE7SUFDRSxVQUFVO0VBQ1oiLCJmaWxlIjoicHJvZmlsLWFnZW5jaWphLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuICBcclxuICAuY29udGFpbmVyIHtcclxuICAgIG1hcmdpbi10b3A6IDIwcHg7XHJcbiAgfVxyXG4gIFxyXG4gIC5yb3cge1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMTBweDtcclxuICB9XHJcbiAgXHJcbiAgLnRleHQtZGFuZ2VyIHtcclxuICAgIGNvbG9yOiByZWQ7XHJcbiAgfVxyXG4gICJdfQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["ProfilAgencijaComponent","constructor","agencijaServis","ruter","proveraServis","ngOnInit","korisnickoIme","sessionStorage","getItem","dohvatiAgenciju","subscribe","agencija","naziv","opis","mejl","telefon","slika","ulica","grad","drzava","maticniBroj","otpremanjeFajla","event","fajl","target","files","citac","FileReader","readAsDataURL","onload","result","azuriraj","lozinka","provera","proveraAgencija","greska","azurirajAgenciju","res","alert","navigate","odustani","odjava","clear","i0","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\kosov\\OneDrive\\Dokumenti\\UredjivanjeProstoraAPP\\frontend\\src\\app\\profil-agencija\\profil-agencija.component.ts","C:\\Users\\kosov\\OneDrive\\Dokumenti\\UredjivanjeProstoraAPP\\frontend\\src\\app\\profil-agencija\\profil-agencija.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { AgencijaService } from '../services/agencija.service';\nimport { Router } from '@angular/router';\nimport { Agencija } from '../models/agencija';\nimport { ProveraService } from '../services/provera.service';\n\n@Component({\n  selector: 'app-profil-agencija',\n  templateUrl: './profil-agencija.component.html',\n  styleUrls: ['./profil-agencija.component.css'],\n})\nexport class ProfilAgencijaComponent implements OnInit {\n  constructor(\n    private agencijaServis: AgencijaService,\n    private ruter: Router,\n    private proveraServis: ProveraService\n  ) {}\n\n  ngOnInit(): void {\n    this.korisnickoIme = sessionStorage.getItem('korisnik');\n    this.agencijaServis\n      .dohvatiAgenciju(this.korisnickoIme)\n      .subscribe((agencija: Agencija) => {\n        this.naziv = agencija.naziv;\n        this.opis = agencija.opis;\n        this.mejl = agencija.mejl;\n        this.telefon = agencija.telefon;\n        this.slika = agencija.slika;\n        this.ulica = agencija.ulica;\n        this.grad = agencija.grad;\n        this.drzava = agencija.drzava;\n        this.maticniBroj = agencija.maticniBroj;\n      });\n  }\n\n  otpremanjeFajla(event) {\n    var fajl = event.target.files[0];\n    var citac = new FileReader();\n    citac.readAsDataURL(fajl);\n    citac.onload = () => {\n      this.slika = citac.result as string;\n    };\n  }\n\n  async azuriraj() {\n    const agencija = {\n      korisnickoIme: this.korisnickoIme,\n      lozinka: '',\n      telefon: this.telefon,\n      mejl: this.mejl,\n      slika: this.slika,\n      naziv: this.naziv,\n      ulica: this.ulica,\n      grad: this.grad,\n      drzava: this.drzava,\n      maticniBroj: this.maticniBroj,\n      opis: this.opis,\n    };\n\n    let provera = await this.proveraServis.proveraAgencija(agencija, true);\n    if (provera != 'ok') {\n      this.greska = provera;\n      return;\n    }\n\n    this.agencijaServis\n      .azurirajAgenciju(\n        this.korisnickoIme,\n        this.telefon,\n        this.mejl,\n        this.slika,\n        this.naziv,\n        this.ulica,\n        this.grad,\n        this.drzava,\n        this.maticniBroj,\n        this.opis\n      )\n      .subscribe((res) => {\n        if (res['poruka'] == 'ok') {\n          alert('Uspešno ste ažurirali profil.');\n        } else {\n          alert('Greška pri ažuriranju profila.');\n        }\n        this.ruter.navigate(['/agencija']);\n      });\n  }\n\n  odustani() {\n    this.ruter.navigate(['agencija']);\n  }\n\n  odjava() {\n    sessionStorage.clear();\n    this.ruter.navigate(['/']);\n  }\n\n  korisnickoIme: string;\n  naziv: string;\n  opis: string;\n  mejl: string;\n  telefon: string;\n  slika: string;\n  ulica: string;\n  grad: string;\n  drzava: string;\n  maticniBroj: string;\n\n  greska: string = '';\n}\n","<app-zaglavlje-agencija></app-zaglavlje-agencija>\n<div class=\"container\">\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n        <label for=\"korisnickoIme\">Korisničko ime</label>\n        <input type=\"text\" class=\"form-control\" id=\"korisnickoIme\" [(ngModel)]=\"korisnickoIme\" disabled>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n        <label for=\"naziv\">Naziv</label>\n        <input type=\"text\" class=\"form-control\" id=\"naziv\" [(ngModel)]=\"naziv\">\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n        <label for=\"opis\">Opis</label>\n        <textarea class=\"form-control\" id=\"opis\" rows=\"10\" [(ngModel)]=\"opis\"></textarea>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n        <label for=\"ulica\">Ulica</label>\n        <input type=\"text\" class=\"form-control\" id=\"ulica\" [(ngModel)]=\"ulica\">\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n        <label for=\"grad\">Grad</label>\n        <input type=\"text\" class=\"form-control\" id=\"grad\" [(ngModel)]=\"grad\">\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n        <label for=\"drzava\">Država</label>\n        <input type=\"text\" class=\"form-control\" id=\"drzava\" [(ngModel)]=\"drzava\">\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n        <label for=\"telefon\">Kontakt telefon</label>\n        <input type=\"text\" class=\"form-control\" id=\"telefon\" [(ngModel)]=\"telefon\">\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n        <label for=\"mejl\">Mejl</label>\n        <input type=\"text\" class=\"form-control\" id=\"mejl\" [(ngModel)]=\"mejl\">\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n        <label for=\"profilnaSlika\">Profilna slika</label>\n        <input type=\"file\" class=\"form-control-file\" id=\"profilnaSlika\" (change)=\"otpremanjeFajla($event)\">\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n        <a [routerLink]=\"['/promena-lozinke']\">Promeni lozinku</a>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n        <button class=\"btn btn-primary\" (click)=\"azuriraj()\">Ažuriraj</button>\n        <button class=\"btn btn-secondary\" (click)=\"odustani()\">Odustani</button>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n        <p class=\"text-danger\">{{ greska }}</p>\n      </div>\n    </div>\n  </div>\n  \n```\n"]},"metadata":{},"sourceType":"module"}