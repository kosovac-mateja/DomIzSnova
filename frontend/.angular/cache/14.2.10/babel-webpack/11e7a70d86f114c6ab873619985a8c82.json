{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/kosov/OneDrive/Dokumenti/UredjivanjeProstoraAPP/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/mejl.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../services/agencija.service\";\nimport * as i4 from \"../services/klijent.service\";\nexport class ZaboravljenaLozinkaComponent {\n  constructor(mejlServis, ruter, agencijaServis, klijentServis) {\n    this.mejlServis = mejlServis;\n    this.ruter = ruter;\n    this.agencijaServis = agencijaServis;\n    this.klijentServis = klijentServis;\n    this.greska = '';\n  }\n\n  ngOnInit() {}\n\n  resetuj() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      if (_this.mejl != _this.mejlPotvrda) {\n        _this.greska = 'Mejl adrese se ne poklapaju!';\n        return;\n      }\n\n      let korisnickoIme = '';\n      let postojiKlijent = yield _this.klijentServis.mejlPostoji(_this.mejl);\n      let postojiAgencija = yield _this.agencijaServis.mejlPostoji(_this.mejl);\n\n      if (postojiKlijent) {\n        let klijent = yield _this.klijentServis.dohvatiKlijentaPoMejlu(_this.mejl);\n        korisnickoIme = klijent.korisnickoIme;\n      } else if (postojiAgencija) {\n        let agencija = yield _this.agencijaServis.dohvatiAgencijuPoMejlu(_this.mejl);\n        korisnickoIme = agencija.korisnickoIme;\n      } else {\n        _this.greska = 'Mejl adresa ne postoji!';\n        return;\n      }\n\n      _this.mejlServis.posaljiMejl(_this.mejl).subscribe(res => {\n        let lozinka = res['lozinka'];\n\n        _this.mejlServis.ubaciPrivremenuLozinku(korisnickoIme, lozinka).subscribe(res => {\n          if (res['poruka'] == 'ok') {\n            alert('Poslat je mejl sa privremenom lozinkom!');\n          } else {\n            alert('Greska prilikom slanja mejla!');\n          }\n        });\n\n        _this.ruter.navigate(['/prijava']);\n      });\n    })();\n  }\n\n}\n\nZaboravljenaLozinkaComponent.ɵfac = function ZaboravljenaLozinkaComponent_Factory(t) {\n  return new (t || ZaboravljenaLozinkaComponent)(i0.ɵɵdirectiveInject(i1.MejlService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.AgencijaService), i0.ɵɵdirectiveInject(i4.KlijentService));\n};\n\nZaboravljenaLozinkaComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ZaboravljenaLozinkaComponent,\n  selectors: [[\"app-zaboravljena-lozinka\"]],\n  decls: 23,\n  vars: 3,\n  consts: [[1, \"container\"], [1, \"row\"], [1, \"col-md-6\"], [1, \"form-group\"], [\"for\", \"mejl\"], [\"type\", \"text\", \"id\", \"mejl\", \"name\", \"mejl\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"mejlPotvrda\"], [\"type\", \"text\", \"id\", \"mejlPotvrda\", \"name\", \"mejlPotvrda\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"text-danger\"]],\n  template: function ZaboravljenaLozinkaComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"app-zaglavlje-pocetna\");\n      i0.ɵɵelementStart(1, \"div\", 0)(2, \"h3\");\n      i0.ɵɵtext(3, \"Zaboravljena lozinka\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"div\", 1)(5, \"div\", 2)(6, \"div\", 3)(7, \"label\", 4);\n      i0.ɵɵtext(8, \"Mejl adresa\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"input\", 5);\n      i0.ɵɵlistener(\"ngModelChange\", function ZaboravljenaLozinkaComponent_Template_input_ngModelChange_9_listener($event) {\n        return ctx.mejl = $event;\n      });\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(10, \"div\", 1)(11, \"div\", 2)(12, \"div\", 3)(13, \"label\", 6);\n      i0.ɵɵtext(14, \"Potvrda mejl adrese\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"input\", 7);\n      i0.ɵɵlistener(\"ngModelChange\", function ZaboravljenaLozinkaComponent_Template_input_ngModelChange_15_listener($event) {\n        return ctx.mejlPotvrda = $event;\n      });\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(16, \"div\", 1)(17, \"div\", 2)(18, \"div\", 3)(19, \"button\", 8);\n      i0.ɵɵlistener(\"click\", function ZaboravljenaLozinkaComponent_Template_button_click_19_listener() {\n        return ctx.resetuj();\n      });\n      i0.ɵɵtext(20, \"Posalji\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(21, \"span\", 9);\n      i0.ɵɵtext(22);\n      i0.ɵɵelementEnd()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngModel\", ctx.mejl);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngModel\", ctx.mejlPotvrda);\n      i0.ɵɵadvance(7);\n      i0.ɵɵtextInterpolate(ctx.greska);\n    }\n  },\n  styles: [\".container[_ngcontent-%COMP%] {\\r\\n    margin-top: 20px;\\r\\n  }\\r\\n  \\r\\n  h3[_ngcontent-%COMP%] {\\r\\n    margin-bottom: 20px;\\r\\n  }\\r\\n  \\r\\n  .form-group[_ngcontent-%COMP%] {\\r\\n    margin-bottom: 20px;\\r\\n  }\\r\\n  \\r\\n  .btn-primary[_ngcontent-%COMP%] {\\r\\n    color: #fff;\\r\\n    background-color: #007bff;\\r\\n    border-color: #007bff;\\r\\n  }\\r\\n  \\r\\n  .text-danger[_ngcontent-%COMP%] {\\r\\n    color: #dc3545;\\r\\n    margin-top: 5px;\\r\\n  }\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInphYm9yYXZsamVuYS1sb3ppbmthLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxnQkFBZ0I7RUFDbEI7O0VBRUE7SUFDRSxtQkFBbUI7RUFDckI7O0VBRUE7SUFDRSxtQkFBbUI7RUFDckI7O0VBRUE7SUFDRSxXQUFXO0lBQ1gseUJBQXlCO0lBQ3pCLHFCQUFxQjtFQUN2Qjs7RUFFQTtJQUNFLGNBQWM7SUFDZCxlQUFlO0VBQ2pCIiwiZmlsZSI6InphYm9yYXZsamVuYS1sb3ppbmthLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY29udGFpbmVyIHtcclxuICAgIG1hcmdpbi10b3A6IDIwcHg7XHJcbiAgfVxyXG4gIFxyXG4gIGgzIHtcclxuICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XHJcbiAgfVxyXG4gIFxyXG4gIC5mb3JtLWdyb3VwIHtcclxuICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XHJcbiAgfVxyXG4gIFxyXG4gIC5idG4tcHJpbWFyeSB7XHJcbiAgICBjb2xvcjogI2ZmZjtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICMwMDdiZmY7XHJcbiAgICBib3JkZXItY29sb3I6ICMwMDdiZmY7XHJcbiAgfVxyXG4gIFxyXG4gIC50ZXh0LWRhbmdlciB7XHJcbiAgICBjb2xvcjogI2RjMzU0NTtcclxuICAgIG1hcmdpbi10b3A6IDVweDtcclxuICB9XHJcbiAgIl19 */\"]\n});","map":{"version":3,"mappings":";;;;;;AAaA,OAAM,MAAOA,4BAAP,CAAmC;EACvCC,YACUC,UADV,EAEUC,KAFV,EAGUC,cAHV,EAIUC,aAJV,EAIuC;IAH7B;IACA;IACA;IACA;IAoDV,cAAiB,EAAjB;EAnDI;;EAEJC,QAAQ,IAAW;;EAEbC,OAAO;IAAA;;IAAA;MACX,IAAI,KAAI,CAACC,IAAL,IAAa,KAAI,CAACC,WAAtB,EAAmC;QACjC,KAAI,CAACC,MAAL,GAAc,8BAAd;QACA;MACD;;MAED,IAAIC,aAAa,GAAW,EAA5B;MAEA,IAAIC,cAAc,SAAkB,KAAI,CAACP,aAAL,CAAmBQ,WAAnB,CAClC,KAAI,CAACL,IAD6B,CAApC;MAGA,IAAIM,eAAe,SAAkB,KAAI,CAACV,cAAL,CAAoBS,WAApB,CACnC,KAAI,CAACL,IAD8B,CAArC;;MAIA,IAAII,cAAJ,EAAoB;QAClB,IAAIG,OAAO,SAAkB,KAAI,CAACV,aAAL,CAAmBW,sBAAnB,CAC3B,KAAI,CAACR,IADsB,CAA7B;QAGAG,aAAa,GAAGI,OAAO,CAACJ,aAAxB;MACD,CALD,MAKO,IAAIG,eAAJ,EAAqB;QAC1B,IAAIG,QAAQ,SAAmB,KAAI,CAACb,cAAL,CAAoBc,sBAApB,CAC7B,KAAI,CAACV,IADwB,CAA/B;QAGAG,aAAa,GAAGM,QAAQ,CAACN,aAAzB;MACD,CALM,MAKA;QACL,KAAI,CAACD,MAAL,GAAc,yBAAd;QACA;MACD;;MAED,KAAI,CAACR,UAAL,CAAgBiB,WAAhB,CAA4B,KAAI,CAACX,IAAjC,EAAuCY,SAAvC,CAAkDC,GAAD,IAAQ;QACvD,IAAIC,OAAO,GAAWD,GAAG,CAAC,SAAD,CAAzB;;QACA,KAAI,CAACnB,UAAL,CACGqB,sBADH,CAC0BZ,aAD1B,EACyCW,OADzC,EAEGF,SAFH,CAEcC,GAAD,IAAQ;UACjB,IAAIA,GAAG,CAAC,QAAD,CAAH,IAAiB,IAArB,EAA2B;YACzBG,KAAK,CAAC,yCAAD,CAAL;UACD,CAFD,MAEO;YACLA,KAAK,CAAC,+BAAD,CAAL;UACD;QACF,CARH;;QASA,KAAI,CAACrB,KAAL,CAAWsB,QAAX,CAAoB,CAAC,UAAD,CAApB;MACD,CAZD;IA9BW;EA2CZ;;AArDsC;;;mBAA5BzB,8BAA4B0B;AAAA;;;QAA5B1B;EAA4B2B;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCbzCL;MAEAA,+BAAuB,CAAvB,EAAuB,IAAvB;MACQA;MAAoBA;MACxBA,+BAAiB,CAAjB,EAAiB,KAAjB,EAAiB,CAAjB,EAAiB,CAAjB,EAAiB,KAAjB,EAAiB,CAAjB,EAAiB,CAAjB,EAAiB,OAAjB,EAAiB,CAAjB;MAG8BA;MAAWA;MAC7BA;MAA8DA;QAAA;MAAA;MAA9DA;MAIZA,gCAAiB,EAAjB,EAAiB,KAAjB,EAAiB,CAAjB,EAAiB,EAAjB,EAAiB,KAAjB,EAAiB,CAAjB,EAAiB,EAAjB,EAAiB,OAAjB,EAAiB,CAAjB;MAGqCA;MAAmBA;MAC5CA;MAA4EA;QAAA;MAAA;MAA5EA;MAIZA,gCAAiB,EAAjB,EAAiB,KAAjB,EAAiB,CAAjB,EAAiB,EAAjB,EAAiB,KAAjB,EAAiB,CAAjB,EAAiB,EAAjB,EAAiB,QAAjB,EAAiB,CAAjB;MAG4CA;QAAA,OAASM,aAAT;MAAkB,CAAlB;MAAoBN;MAAOA;MAIvEA;MAA0BA;MAAYA;;;;MAnBoCA;MAAAA;MAQcA;MAAAA;MAW9DA;MAAAA","names":["ZaboravljenaLozinkaComponent","constructor","mejlServis","ruter","agencijaServis","klijentServis","ngOnInit","resetuj","mejl","mejlPotvrda","greska","korisnickoIme","postojiKlijent","mejlPostoji","postojiAgencija","klijent","dohvatiKlijentaPoMejlu","agencija","dohvatiAgencijuPoMejlu","posaljiMejl","subscribe","res","lozinka","ubaciPrivremenuLozinku","alert","navigate","i0","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\kosov\\OneDrive\\Dokumenti\\UredjivanjeProstoraAPP\\frontend\\src\\app\\zaboravljena-lozinka\\zaboravljena-lozinka.component.ts","C:\\Users\\kosov\\OneDrive\\Dokumenti\\UredjivanjeProstoraAPP\\frontend\\src\\app\\zaboravljena-lozinka\\zaboravljena-lozinka.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { MejlService } from '../services/mejl.service';\nimport { Router } from '@angular/router';\nimport { AgencijaService } from '../services/agencija.service';\nimport { KlijentService } from '../services/klijent.service';\nimport { Klijent } from '../models/klijent';\nimport { Agencija } from '../models/agencija';\n\n@Component({\n  selector: 'app-zaboravljena-lozinka',\n  templateUrl: './zaboravljena-lozinka.component.html',\n  styleUrls: ['./zaboravljena-lozinka.component.css'],\n})\nexport class ZaboravljenaLozinkaComponent implements OnInit {\n  constructor(\n    private mejlServis: MejlService,\n    private ruter: Router,\n    private agencijaServis: AgencijaService,\n    private klijentServis: KlijentService\n  ) {}\n\n  ngOnInit(): void {}\n\n  async resetuj() {\n    if (this.mejl != this.mejlPotvrda) {\n      this.greska = 'Mejl adrese se ne poklapaju!';\n      return;\n    }\n\n    let korisnickoIme: string = '';\n\n    let postojiKlijent: boolean = await this.klijentServis.mejlPostoji(\n      this.mejl\n    );\n    let postojiAgencija: boolean = await this.agencijaServis.mejlPostoji(\n      this.mejl\n    );\n\n    if (postojiKlijent) {\n      let klijent: Klijent = await this.klijentServis.dohvatiKlijentaPoMejlu(\n        this.mejl\n      );\n      korisnickoIme = klijent.korisnickoIme;\n    } else if (postojiAgencija) {\n      let agencija: Agencija = await this.agencijaServis.dohvatiAgencijuPoMejlu(\n        this.mejl\n      );\n      korisnickoIme = agencija.korisnickoIme;\n    } else {\n      this.greska = 'Mejl adresa ne postoji!';\n      return;\n    }\n\n    this.mejlServis.posaljiMejl(this.mejl).subscribe((res) => {\n      let lozinka: string = res['lozinka'];\n      this.mejlServis\n        .ubaciPrivremenuLozinku(korisnickoIme, lozinka)\n        .subscribe((res) => {\n          if (res['poruka'] == 'ok') {\n            alert('Poslat je mejl sa privremenom lozinkom!');\n          } else {\n            alert('Greska prilikom slanja mejla!');\n          }\n        });\n      this.ruter.navigate(['/prijava']);\n    });\n  }\n\n  mejl: string;\n  mejlPotvrda: string;\n  greska: string = '';\n}\n","<app-zaglavlje-pocetna></app-zaglavlje-pocetna>\n\n<div class=\"container\">\n    <h3>Zaboravljena lozinka</h3>\n    <div class=\"row\">\n        <div class=\"col-md-6\">\n            <div class=\"form-group\">\n                <label for=\"mejl\">Mejl adresa</label>\n                <input type=\"text\" class=\"form-control\" id=\"mejl\" name=\"mejl\" [(ngModel)]=\"mejl\">\n            </div>\n        </div>\n    </div>\n    <div class=\"row\">\n        <div class=\"col-md-6\">\n            <div class=\"form-group\">\n                <label for=\"mejlPotvrda\">Potvrda mejl adrese</label>\n                <input type=\"text\" class=\"form-control\" id=\"mejlPotvrda\" name=\"mejlPotvrda\" [(ngModel)]=\"mejlPotvrda\">\n            </div>\n        </div>\n    </div>\n    <div class=\"row\">\n        <div class=\"col-md-6\">\n            <div class=\"form-group\">\n                <button class=\"btn btn-primary\" (click)=\"resetuj()\">Posalji</button>\n            </div>\n        </div>\n    </div>\n    <span class=\"text-danger\">{{ greska }}</span>\n</div>\n"]},"metadata":{},"sourceType":"module"}